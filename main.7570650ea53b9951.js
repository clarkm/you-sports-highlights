"use strict";(self.webpackChunkYouSportsHighlights=self.webpackChunkYouSportsHighlights||[]).push([[179],{48:()=>{function ge(t){return"function"==typeof t}function Ea(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Da=Ea(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ao(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class sn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){e=o instanceof Da?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{P_(o)}catch(s){e=e??[],s instanceof Da?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Da(e)}}add(e){var n;if(e&&e!==this)if(this.closed)P_(e);else{if(e instanceof sn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ao(n,e)}remove(e){const{_finalizers:n}=this;n&&Ao(n,e),e instanceof sn&&e._removeParent(this)}}sn.EMPTY=(()=>{const t=new sn;return t.closed=!0,t})();const M_=sn.EMPTY;function N_(t){return t instanceof sn||t&&"closed"in t&&ge(t.remove)&&ge(t.add)&&ge(t.unsubscribe)}function P_(t){ge(t)?t():t.unsubscribe()}const Ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ca={setTimeout(t,e,...n){const{delegate:r}=Ca;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Ca;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function R_(t){Ca.setTimeout(()=>{const{onUnhandledError:e}=Ar;if(!e)throw t;e(t)})}function x_(){}const m0=Ec("C",void 0,void 0);function Ec(t,e,n){return{kind:t,value:e,error:n}}let Mr=null;function Ia(t){if(Ar.useDeprecatedSynchronousErrorHandling){const e=!Mr;if(e&&(Mr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Mr;if(Mr=null,n)throw r}}else t()}class Dc extends sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,N_(e)&&e.add(this)):this.destination=I0}static create(e,n,r){return new Mo(e,n,r)}next(e){this.isStopped?Ic(function y0(t){return Ec("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ic(function _0(t){return Ec("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ic(m0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const E0=Function.prototype.bind;function Cc(t,e){return E0.call(t,e)}class D0{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){wa(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){wa(r)}else wa(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){wa(n)}}}class Mo extends Dc{constructor(e,n,r){let i;if(super(),ge(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Cc(e.next,o),error:e.error&&Cc(e.error,o),complete:e.complete&&Cc(e.complete,o)}):i=e}this.destination=new D0(i)}}function wa(t){Ar.useDeprecatedSynchronousErrorHandling?function v0(t){Ar.useDeprecatedSynchronousErrorHandling&&Mr&&(Mr.errorThrown=!0,Mr.error=t)}(t):R_(t)}function Ic(t,e){const{onStoppedNotification:n}=Ar;n&&Ca.setTimeout(()=>n(t,e))}const I0={closed:!0,next:x_,error:function C0(t){throw t},complete:x_},wc="function"==typeof Symbol&&Symbol.observable||"@@observable";function O_(t){return t}let We=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function b0(t){return t&&t instanceof Dc||function w0(t){return t&&ge(t.next)&&ge(t.error)&&ge(t.complete)}(t)&&N_(t)}(n)?n:new Mo(n,r,i);return Ia(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=F_(r))((i,o)=>{const s=new Mo({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[wc](){return this}pipe(...n){return function k_(t){return 0===t.length?O_:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=F_(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function F_(t){var e;return null!==(e=t??Ar.Promise)&&void 0!==e?e:Promise}const T0=Ea(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let bc=(()=>{class t extends We{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new L_(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new T0}next(n){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?M_:(this.currentObservers=null,o.push(n),new sn(()=>{this.currentObservers=null,Ao(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new We;return n.source=this,n}}return t.create=(e,n)=>new L_(e,n),t})();class L_ extends bc{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:M_}}function Nr(t){return e=>{if(function S0(t){return ge(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pr(t,e,n,r,i){return new A0(t,e,n,r,i)}class A0 extends Dc{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Rr(t,e){return Nr((n,r)=>{let i=0;n.subscribe(Pr(r,o=>{r.next(t.call(e,o,i++))}))})}function B_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function xr(t){return this instanceof xr?(this.v=t,this):new xr(t)}function P0(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){o.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof xr?Promise.resolve(f.value.v).then(u,c):d(o[0][2],f)}(r[f](h))}catch(p){d(o[0][3],p)}}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function R0(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function H_(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}(a,l,(s=t[o](s)).done,s.value)})}}}const j_=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function $_(t){return ge(t?.then)}function G_(t){return ge(t[wc])}function W_(t){return Symbol.asyncIterator&&ge(t?.[Symbol.asyncIterator])}function z_(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const q_=function O0(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function K_(t){return ge(t?.[q_])}function Y_(t){return P0(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield xr(n.read());if(i)return yield xr(void 0);yield yield xr(r)}}finally{n.releaseLock()}})}function Q_(t){return ge(t?.getReader)}function bn(t){if(t instanceof We)return t;if(null!=t){if(G_(t))return function k0(t){return new We(e=>{const n=t[wc]();if(ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(j_(t))return function F0(t){return new We(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if($_(t))return function L0(t){return new We(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,R_)})}(t);if(W_(t))return J_(t);if(K_(t))return function V0(t){return new We(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Q_(t))return function B0(t){return J_(Y_(t))}(t)}throw z_(t)}function J_(t){return new We(e=>{(function U0(t,e){var n,r,i,o;return function M0(t,e,n,r){return new(n||(n=Promise))(function(o,s){function a(c){try{u(r.next(c))}catch(d){s(d)}}function l(c){try{u(r.throw(c))}catch(d){s(d)}}function u(c){c.done?o(c.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=R0(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Xn(t,e,n,r=0,i=!1){const o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function ba(t,e,n=1/0){return ge(e)?ba((r,i)=>Rr((o,s)=>e(r,o,i,s))(bn(t(r,i))),n):("number"==typeof e&&(n=e),Nr((r,i)=>function H0(t,e,n,r,i,o,s,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&e.complete()},h=g=>u<r?p(g):l.push(g),p=g=>{o&&e.next(g),u++;let m=!1;bn(n(g,c++)).subscribe(Pr(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const v=l.shift();s?Xn(e,s,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(Pr(e,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,t,n)))}const Sc=new We(t=>t.complete());function Ac(t){return t[t.length-1]}function X_(t){return function G0(t){return t&&ge(t.schedule)}(Ac(t))?t.pop():void 0}function Z_(t,e=0){return Nr((n,r)=>{n.subscribe(Pr(r,i=>Xn(r,t,()=>r.next(i),e),()=>Xn(r,t,()=>r.complete(),e),i=>Xn(r,t,()=>r.error(i),e)))})}function ey(t,e=0){return Nr((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function ty(t,e){if(!t)throw new Error("Iterable cannot be null");return new We(n=>{Xn(n,e,()=>{const r=t[Symbol.asyncIterator]();Xn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Mc(t,e){return e?function X0(t,e){if(null!=t){if(G_(t))return function q0(t,e){return bn(t).pipe(ey(e),Z_(e))}(t,e);if(j_(t))return function Y0(t,e){return new We(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if($_(t))return function K0(t,e){return bn(t).pipe(ey(e),Z_(e))}(t,e);if(W_(t))return ty(t,e);if(K_(t))return function Q0(t,e){return new We(n=>{let r;return Xn(n,e,()=>{r=t[q_](),Xn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}(t,e);if(Q_(t))return function J0(t,e){return ty(Y_(t),e)}(t,e)}throw z_(t)}(t,e):bn(t)}function Nc(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Mo({next:()=>{r.unsubscribe(),t()}});return bn(e(...n)).subscribe(r)}function ie(t){for(let e in t)if(t[e]===ie)return e;throw Error("Could not find renamed property on target object.")}function Pc(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function se(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(se).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Rc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const tM=ie({__forward_ref__:ie});function ae(t){return t.__forward_ref__=ae,t.toString=function(){return se(this())},t}function P(t){return xc(t)?t():t}function xc(t){return"function"==typeof t&&t.hasOwnProperty(tM)&&t.__forward_ref__===ae}function Oc(t){return t&&!!t.\u0275providers}const Ta="https://g.co/ng/security#xss";class b extends Error{constructor(e,n){super(function Sa(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function O(t){return"string"==typeof t?t:null==t?"":String(t)}function Aa(t,e){throw new b(-201,!1)}function Rt(t,e){null==t&&function X(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function K(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function an(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ma(t){return ny(t,Na)||ny(t,iy)}function ny(t,e){return t.hasOwnProperty(e)?t[e]:null}function ry(t){return t&&(t.hasOwnProperty(kc)||t.hasOwnProperty(uM))?t[kc]:null}const Na=ie({\u0275prov:ie}),kc=ie({\u0275inj:ie}),iy=ie({ngInjectableDef:ie}),uM=ie({ngInjectorDef:ie});var x=(()=>((x=x||{})[x.Default=0]="Default",x[x.Host=1]="Host",x[x.Self=2]="Self",x[x.SkipSelf=4]="SkipSelf",x[x.Optional=8]="Optional",x))();let Fc;function xt(t){const e=Fc;return Fc=t,e}function oy(t,e,n){const r=Ma(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==e?e:void Aa(se(t))}const le=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),No={},Lc="__NG_DI_FLAG__",Pa="ngTempTokenPath",fM=/\n/gm,sy="__source";let Po;function _i(t){const e=Po;return Po=t,e}function pM(t,e=x.Default){if(void 0===Po)throw new b(-203,!1);return null===Po?oy(t,void 0,e):Po.get(t,e&x.Optional?null:void 0,e)}function B(t,e=x.Default){return(function cM(){return Fc}()||pM)(P(t),e)}function yi(t,e=x.Default){return B(t,Ra(e))}function Ra(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vc(t){const e=[];for(let n=0;n<t.length;n++){const r=P(t[n]);if(Array.isArray(r)){if(0===r.length)throw new b(900,!1);let i,o=x.Default;for(let s=0;s<r.length;s++){const a=r[s],l=gM(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function Ro(t,e){return t[Lc]=e,t.prototype[Lc]=e,t}function gM(t){return t[Lc]}function er(t){return{toString:t}.toString()}var Gt=(()=>((Gt=Gt||{})[Gt.OnPush=0]="OnPush",Gt[Gt.Default=1]="Default",Gt))(),ln=(()=>{return(t=ln||(ln={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ln;var t})();const Tn={},Q=[],xa=ie({\u0275cmp:ie}),Bc=ie({\u0275dir:ie}),Uc=ie({\u0275pipe:ie}),ly=ie({\u0275mod:ie}),Sn=ie({\u0275fac:ie}),xo=ie({__NG_ELEMENT_ID__:ie});let yM=0;function Hc(t){return er(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Gt.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Q,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,id:"c"+yM++,styles:t.styles||Q,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=t.dependencies,s=t.features;return i.inputs=dy(t.inputs,r),i.outputs=dy(t.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(uy).filter(cy):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(it).filter(cy):null,i})}function uy(t){return Z(t)||ze(t)}function cy(t){return null!==t}function An(t){return er(()=>({type:t.type,bootstrap:t.bootstrap||Q,declarations:t.declarations||Q,imports:t.imports||Q,exports:t.exports||Q,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function dy(t,e){if(null==t)return Tn;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const k=Hc;function rt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Z(t){return t[xa]||null}function ze(t){return t[Bc]||null}function it(t){return t[Uc]||null}const j=11;function It(t){return Array.isArray(t)&&"object"==typeof t[1]}function zt(t){return Array.isArray(t)&&!0===t[1]}function Gc(t){return 0!=(4&t.flags)}function Vo(t){return t.componentOffset>-1}function Va(t){return 1==(1&t.flags)}function qt(t){return null!==t.template}function DM(t){return 0!=(256&t[2])}function kr(t,e){return t.hasOwnProperty(Sn)?t[Sn]:null}class wM{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Nn(){return _y}function _y(t){return t.type.prototype.ngOnChanges&&(t.setInput=TM),bM}function bM(){const t=vy(this),e=t?.current;if(e){const n=t.previous;if(n===Tn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function TM(t,e,n,r){const i=this.declaredInputs[n],o=vy(t)||function SM(t,e){return t[yy]=e}(t,{previous:Tn,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[i];s[i]=new wM(l&&l.currentValue,e,a===Tn),t[r]=e}Nn.ngInherit=!0;const yy="__ngSimpleChanges__";function vy(t){return t[yy]||null}function $e(t){for(;Array.isArray(t);)t=t[0];return t}function Ba(t,e){return $e(e[t])}function wt(t,e){return $e(e[t.index])}function Cy(t,e){return t.data[e]}function Ii(t,e){return t[e]}function bt(t,e){const n=e[t];return It(n)?n:n[0]}function Ua(t){return 64==(64&t[2])}function tr(t,e){return null==e?null:t[e]}function Iy(t){t[18]=0}function zc(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const F={lFrame:xy(null),bindingsEnabled:!0};function by(){return F.bindingsEnabled}function E(){return F.lFrame.lView}function q(){return F.lFrame.tView}function nr(t){return F.lFrame.contextLView=t,t[8]}function rr(t){return F.lFrame.contextLView=null,t}function Ge(){let t=Ty();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ty(){return F.lFrame.currentTNode}function cn(t,e){const n=F.lFrame;n.currentTNode=t,n.isParent=e}function qc(){return F.lFrame.isParent}function wi(){return F.lFrame.bindingIndex++}function UM(t,e){const n=F.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yc(e)}function Yc(t){F.lFrame.currentDirectiveIndex=t}function Jc(t){F.lFrame.currentQueryIndex=t}function jM(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Py(t,e,n){if(n&x.SkipSelf){let i=e,o=t;for(;!(i=i.parent,null!==i||n&x.Host||(i=jM(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,t=o}const r=F.lFrame=Ry();return r.currentTNode=e,r.lView=t,!0}function Xc(t){const e=Ry(),n=t[1];F.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ry(){const t=F.lFrame,e=null===t?null:t.child;return null===e?xy(t):e}function xy(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Oy(){const t=F.lFrame;return F.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ky=Oy;function Zc(){const t=Oy();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function at(){return F.lFrame.selectedIndex}function Fr(t){F.lFrame.selectedIndex=t}function ye(){const t=F.lFrame;return Cy(t.tView,t.selectedIndex)}function Ha(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function ja(t,e,n){Fy(t,e,3,n)}function $a(t,e,n,r){(3&t[2])===n&&Fy(t,e,n,r)}function ed(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Fy(t,e,n,r){const o=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<o||-1==o)&&(JM(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function JM(t,e,n,r){const i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Uo{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function nd(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{const o=i,s=n[++r];Vy(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function Ly(t){return 3===t||4===t||6===t}function Vy(t){return 64===t.charCodeAt(0)}function Ho(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||By(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function By(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const a=t[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<t.length;){const a=t[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Uy(t){return-1!==t}function Ga(t){return 32767&t}function Wa(t,e){let n=function tN(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let rd=!0;function za(t){const e=rd;return rd=t,e}let nN=0;const dn={};function qa(t,e){const n=$y(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,id(r.data,t),id(e,null),id(r.blueprint,null));const i=od(t,e),o=t.injectorIndex;if(Uy(i)){const s=Ga(i),a=Wa(i,e),l=a[1].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function id(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $y(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function od(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=Qy(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function sd(t,e,n){!function rN(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(xo)&&(r=n[xo]),null==r&&(r=n[xo]=nN++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Gy(t,e,n){if(n&x.Optional||void 0!==t)return t;Aa()}function Wy(t,e,n,r){if(n&x.Optional&&void 0===r&&(r=null),!(n&(x.Self|x.Host))){const i=t[9],o=xt(void 0);try{return i?i.get(e,r,n&x.Optional):oy(e,r,n&x.Optional)}finally{xt(o)}}return Gy(r,0,n)}function zy(t,e,n,r=x.Default,i){if(null!==t){if(1024&e[2]){const s=function lN(t,e,n,r,i){let o=t,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=qy(o,s,n,r|x.Self,dn);if(a!==dn)return a;let l=o.parent;if(!l){const u=s[21];if(u){const c=u.get(n,dn,r);if(c!==dn)return c}l=Qy(s),s=s[15]}o=l}return i}(t,e,n,r,dn);if(s!==dn)return s}const o=qy(t,e,n,r,dn);if(o!==dn)return o}return Wy(e,n,r,i)}function qy(t,e,n,r,i){const o=function sN(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(xo)?t[xo]:void 0;return"number"==typeof e?e>=0?255&e:aN:e}(n);if("function"==typeof o){if(!Py(e,t,r))return r&x.Host?Gy(i,0,r):Wy(e,n,r,i);try{const s=o(r);if(null!=s||r&x.Optional)return s;Aa()}finally{ky()}}else if("number"==typeof o){let s=null,a=$y(t,e),l=-1,u=r&x.Host?e[16][6]:null;for((-1===a||r&x.SkipSelf)&&(l=-1===a?od(t,e):e[a+8],-1!==l&&Yy(r,!1)?(s=e[1],a=Ga(l),e=Wa(l,e)):a=-1);-1!==a;){const c=e[1];if(Ky(o,a,c.data)){const d=oN(a,e,n,s,r,u);if(d!==dn)return d}l=e[a+8],-1!==l&&Yy(r,e[1].data[a+8]===u)&&Ky(o,a,e)?(s=c,a=Ga(l),e=Wa(l,e)):a=-1}}return i}function oN(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],c=function Ka(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,c=o>>20,f=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=s[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=s[l];if(h&&qt(h)&&h.type===n)return l}return null}(a,s,n,null==r?Vo(a)&&rd:r!=s&&0!=(3&a.type),i&x.Host&&o===a);return null!==c?Lr(e,s,c,a):dn}function Lr(t,e,n,r){let i=t[n];const o=e.data;if(function XM(t){return t instanceof Uo}(i)){const s=i;s.resolving&&function nM(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new b(-200,`Circular dependency in DI detected for ${t}${n}`)}(function J(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():O(t)}(o[n]));const a=za(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?xt(s.injectImpl):null;Py(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function QM(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=_y(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&xt(l),za(a),s.resolving=!1,ky()}}return i}function Ky(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Yy(t,e){return!(t&x.Self||t&x.Host&&e)}class Ti{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return zy(this._tNode,this._lView,e,Ra(r),n)}}function aN(){return new Ti(Ge(),E())}function Ye(t){return er(()=>{const e=t.prototype.constructor,n=e[Sn]||ad(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const o=i[Sn]||ad(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ad(t){return xc(t)?()=>{const e=ad(P(t));return e&&e()}:kr(t)}function Qy(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const Ai="__parameters__";function Ni(t,e,n){return er(()=>{const r=function ud(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,u,c){const d=l.hasOwnProperty(Ai)?l[Ai]:Object.defineProperty(l,Ai,{value:[]})[Ai];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(s),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class M{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=K({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vr(t,e){t.forEach(n=>Array.isArray(n)?Vr(n,e):e(n))}function Xy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ya(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Tt(t,e,n){let r=Pi(t,e);return r>=0?t[1|r]=n:(r=~r,function fN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function dd(t,e){const n=Pi(t,e);if(n>=0)return t[1|n]}function Pi(t,e){return function Zy(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}(t,e,1)}const Ja=Ro(Ni("Optional"),8),Xa=Ro(Ni("SkipSelf"),4);var ht=(()=>((ht=ht||{})[ht.Important=1]="Important",ht[ht.DashCase=2]="DashCase",ht))();const _d=new Map;let ON=0;const vd="__ngContext__";function Qe(t,e){It(e)?(t[vd]=e[20],function FN(t){_d.set(t[20],t)}(e)):t[vd]=e}function Dd(t,e){return undefined(t,e)}function Ko(t){const e=t[3];return zt(e)?e[3]:e}function Cd(t){return vv(t[13])}function Id(t){return vv(t[4])}function vv(t){for(;null!==t&&!zt(t);)t=t[4];return t}function xi(t,e,n,r,i){if(null!=r){let o,s=!1;zt(r)?o=r:It(r)&&(s=!0,r=r[0]);const a=$e(r);0===t&&null!==n?null==i?bv(e,n,a):Br(e,n,a,i||null,!0):1===t&&null!==n?Br(e,n,a,i||null,!0):2===t?function Nd(t,e,n){const r=tl(t,e);r&&function nP(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function oP(t,e,n,r,i){const o=n[7];o!==$e(n)&&xi(e,t,r,o,i);for(let a=10;a<n.length;a++){const l=n[a];Yo(l[1],l,t,e,r,o)}}(e,t,o,n,i)}}function bd(t,e,n){return t.createElement(e,n)}function Dv(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,zc(i,-1)),n.splice(r,1)}function Td(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Dv(i,r),e>0&&(t[n-1][4]=r[4]);const o=Ya(t,10+e);!function KN(t,e){Yo(t,e,e[j],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Cv(t,e){if(!(128&e[2])){const n=e[j];n.destroyNode&&Yo(t,e,n,3,null,null),function JN(t){let e=t[13];if(!e)return Sd(t[1],t);for(;e;){let n=null;if(It(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)It(e)&&Sd(e[1],e),e=e[3];null===e&&(e=t),It(e)&&Sd(e[1],e),n=e&&e[4]}e=n}}(e)}}function Sd(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function tP(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Uo)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function eP(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(t,e),1===e[1].type&&e[j].destroy();const n=e[17];if(null!==n&&zt(e[3])){n!==e[3]&&Dv(n,e);const r=e[19];null!==r&&r.detachView(t)}!function LN(t){_d.delete(t[20])}(e)}}function Iv(t,e,n){return function wv(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=t.data[r.directiveStart+i];if(o===ln.None||o===ln.Emulated)return null}return wt(r,n)}}(t,e.parent,n)}function Br(t,e,n,r,i){t.insertBefore(e,n,r,i)}function bv(t,e,n){t.appendChild(e,n)}function Tv(t,e,n,r,i){null!==r?Br(t,e,n,r,i):bv(t,e,n)}function tl(t,e){return t.parentNode(e)}let il,xd,ol,Mv=function Av(t,e,n){return 40&t.type?wt(t,n):null};function nl(t,e,n,r){const i=Iv(t,r,e),o=e[j],a=function Sv(t,e,n){return Mv(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Tv(o,i,n[l],a,!1);else Tv(o,i,n,a,!1)}function rl(t,e){if(null!==e){const n=e.type;if(3&n)return wt(e,t);if(4&n)return Md(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return rl(t,r);{const i=t[e.index];return zt(i)?Md(-1,i):$e(i)}}if(32&n)return Dd(e,t)()||$e(t[e.index]);{const r=Pv(t,e);return null!==r?Array.isArray(r)?r[0]:rl(Ko(t[16]),r):rl(t,e.next)}}return null}function Pv(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Md(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return rl(r,i)}return e[7]}function Pd(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Qe($e(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)Pd(t,e,n.child,r,i,o,!1),xi(e,t,i,a,o);else if(32&l){const u=Dd(n,r);let c;for(;c=u();)xi(e,t,i,c,o);xi(e,t,i,a,o)}else 16&l?Rv(t,e,r,n,i,o):xi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Yo(t,e,n,r,i,o){Pd(n,r,t.firstChild,e,i,o,!1)}function Rv(t,e,n,r,i,o){const s=n[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)xi(e,t,i,l[u],o);else Pd(t,e,l,s[3],i,o,!0)}function xv(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ov(t,e,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&nd(t,e,r),null!==i&&xv(t,e,i),null!==o&&function aP(t,e,n){t.setAttribute(e,"style",n)}(t,e,o)}function Ur(t){return function Rd(){if(void 0===il&&(il=null,le.trustedTypes))try{il=le.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return il}()?.createHTML(t)||t}function Vv(t){return function Od(){if(void 0===ol&&(ol=null,le.trustedTypes))try{ol=le.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ol}()?.createScriptURL(t)||t}class Hr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ta})`}}class fP extends Hr{getTypeName(){return"HTML"}}class hP extends Hr{getTypeName(){return"Style"}}class pP extends Hr{getTypeName(){return"Script"}}class gP extends Hr{getTypeName(){return"URL"}}class mP extends Hr{getTypeName(){return"ResourceURL"}}function St(t){return t instanceof Hr?t.changingThisBreaksApplicationSecurity:t}function fn(t,e){const n=function _P(t){return t instanceof Hr&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ta})`)}return n===e}class IP{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(Ur(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class wP{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const r=this.inertDocument.createElement("body");n.appendChild(r)}}getInertBodyElement(e){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=Ur(e),n;const r=this.inertDocument.createElement("body");return r.innerHTML=Ur(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const n=e.attributes;for(let i=n.length-1;0<i;i--){const s=n.item(i).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&e.removeAttribute(s)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const TP=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function sl(t){return(t=String(t)).match(TP)?t:"unsafe:"+t}function xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Qo(...t){const e={};for(const n of t)for(const r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}const Uv=xn("area,br,col,hr,img,wbr"),Hv=xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jv=xn("rp,rt"),kd=Qo(Uv,Qo(Hv,xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qo(jv,xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qo(jv,Hv)),Fd=xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$v=Qo(Fd,xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),SP=xn("script,style,template");class AP{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(e){const n=e.nodeName.toLowerCase();if(!kd.hasOwnProperty(n))return this.sanitizedSomething=!0,!SP.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!$v.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Fd[a]&&(l=sl(l)),this.buf.push(" ",s,'="',Gv(l),'"')}return this.buf.push(">"),!0}endElement(e){const n=e.nodeName.toLowerCase();kd.hasOwnProperty(n)&&!Uv.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Gv(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}}const MP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NP=/([^\#-~ |!])/g;function Gv(t){return t.replace(/&/g,"&amp;").replace(MP,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(NP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let al;function Wv(t,e){let n=null;try{al=al||function Bv(t){const e=new wP(t);return function bP(){try{return!!(new window.DOMParser).parseFromString(Ur(""),"text/html")}catch{return!1}}()?new IP(e):e}(t);let r=e?String(e):"";n=al.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=al.getInertBodyElement(r)}while(r!==o);return Ur((new AP).sanitizeChildren(Ld(n)||n))}finally{if(n){const r=Ld(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Ld(t){return"content"in t&&function PP(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ue=(()=>((ue=ue||{})[ue.NONE=0]="NONE",ue[ue.HTML=1]="HTML",ue[ue.STYLE=2]="STYLE",ue[ue.SCRIPT=3]="SCRIPT",ue[ue.URL=4]="URL",ue[ue.RESOURCE_URL=5]="RESOURCE_URL",ue))();function Vd(t){const e=Jo();return e?e.sanitize(ue.URL,t)||"":fn(t,"URL")?St(t):sl(O(t))}function Bd(t){const e=Jo();if(e)return Vv(e.sanitize(ue.RESOURCE_URL,t)||"");if(fn(t,"ResourceURL"))return Vv(St(t));throw new b(904,!1)}function Jo(){const t=E();return t&&t[12]}const zv=new M("ENVIRONMENT_INITIALIZER"),qv=new M("INJECTOR",-1),Kv=new M("INJECTOR_DEF_TYPES");class Yv{get(e,n=No){if(n===No){const r=new Error(`NullInjectorError: No provider for ${se(e)}!`);throw r.name="NullInjectorError",r}return n}}function UP(...t){return{\u0275providers:Qv(0,t),\u0275fromNgModule:!0}}function Qv(t,...e){const n=[],r=new Set;let i;return Vr(e,o=>{const s=o;Ud(s,n,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&Jv(i,n),n}function Jv(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Hd(i,o=>{e.push(o)})}}function Ud(t,e,n,r){if(!(t=P(t)))return!1;let i=null,o=ry(t);const s=!o&&Z(t);if(o||s){if(s&&!s.standalone)return!1;i=t}else{const l=t.ngModule;if(o=ry(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of l)Ud(u,e,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Vr(o.imports,c=>{Ud(c,e,n,r)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&Jv(u,e)}if(!a){const u=kr(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:Q},{provide:Kv,useValue:i,multi:!0},{provide:zv,useValue:()=>B(i),multi:!0})}const l=o.providers;null==l||a||Hd(l,c=>{e.push(c)})}}return i!==t&&void 0!==t.providers}function Hd(t,e){for(let n of t)Oc(n)&&(n=n.\u0275providers),Array.isArray(n)?Hd(n,e):e(n)}const HP=ie({provide:String,useValue:ie});function jd(t){return null!==t&&"object"==typeof t&&HP in t}function jr(t){return"function"==typeof t}const $d=new M("Set Injector scope."),ll={},$P={};let Gd;function ul(){return void 0===Gd&&(Gd=new Yv),Gd}class $r{}class eE extends $r{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zd(e,s=>this.processProvider(s)),this.records.set(qv,Oi(void 0,this)),i.has("environment")&&this.records.set($r,Oi(void 0,this));const o=this.records.get($d);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Kv.multi,Q,x.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=_i(this),r=xt(void 0);try{return e()}finally{_i(n),xt(r)}}get(e,n=No,r=x.Default){this.assertNotDestroyed(),r=Ra(r);const i=_i(this),o=xt(void 0);try{if(!(r&x.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function KP(t){return"function"==typeof t||"object"==typeof t&&t instanceof M}(e)&&Ma(e);a=l&&this.injectableDefInScope(l)?Oi(Wd(e),ll):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&x.Self?ul():this.parent).get(e,n=r&x.Optional&&n===No?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[Pa]=s[Pa]||[]).unshift(se(e)),i)throw s;return function mM(t,e,n,r){const i=t[Pa];throw e[sy]&&i.unshift(e[sy]),t.message=function _M(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=se(e);if(Array.isArray(e))i=e.map(se).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):se(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fM,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Pa]=null,t}(s,e,"R3InjectorError",this.source)}throw s}finally{xt(o),_i(i)}}resolveInjectorInitializers(){const e=_i(this),n=xt(void 0);try{const r=this.get(zv.multi,Q,x.Self);for(const i of r)i()}finally{_i(e),xt(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(se(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(e){let n=jr(e=P(e))?e:P(e&&e.provide);const r=function WP(t){return jd(t)?Oi(void 0,t.useValue):Oi(tE(t),ll)}(e);if(jr(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Oi(void 0,ll,!0),i.factory=()=>Vc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===ll&&(n.value=$P,n.value=n.factory()),"object"==typeof n.value&&n.value&&function qP(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=P(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Wd(t){const e=Ma(t),n=null!==e?e.factory:kr(t);if(null!==n)return n;if(t instanceof M)throw new b(204,!1);if(t instanceof Function)return function GP(t){const e=t.length;if(e>0)throw function Go(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new b(204,!1);const n=function aM(t){const e=t&&(t[Na]||t[iy]);if(e){const n=function lM(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new b(204,!1)}function tE(t,e,n){let r;if(jr(t)){const i=P(t);return kr(i)||Wd(i)}if(jd(t))r=()=>P(t.useValue);else if(function Zv(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Vc(t.deps||[]));else if(function Xv(t){return!(!t||!t.useExisting)}(t))r=()=>B(P(t.useExisting));else{const i=P(t&&(t.useClass||t.provide));if(!function zP(t){return!!t.deps}(t))return kr(i)||Wd(i);r=()=>new i(...Vc(t.deps))}return r}function Oi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zd(t,e){for(const n of t)Array.isArray(n)?zd(n,e):n&&Oc(n)?zd(n.\u0275providers,e):e(n)}class YP{}class nE{}class JP{resolveComponentFactory(e){throw function QP(t){const e=Error(`No component factory found for ${se(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let cl=(()=>{class t{}return t.NULL=new JP,t})();function XP(){return ki(Ge(),E())}function ki(t,e){return new Kt(wt(t,e))}let Kt=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=XP,t})();class iE{}let Gr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function eR(){const t=E(),n=bt(Ge().index,t);return(It(n)?n:t)[j]}(),t})(),tR=(()=>{class t{}return t.\u0275prov=K({token:t,providedIn:"root",factory:()=>null}),t})();class dl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const nR=new dl("15.1.5"),qd={};function Yd(t){return t.ngOriginalError}class Fi{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Yd(e);for(;n&&Yd(n);)n=Yd(n);return n||null}}function sE(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}const aE="ng-template";function hR(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==sE(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function lE(t){return 4===t.type&&t.value!==aE}function pR(t,e,n){return e===(4!==t.type||n?t.value:aE)}function gR(t,e,n){let r=4;const i=t.attrs||[],o=function yR(t){for(let e=0;e<t.length;e++)if(Ly(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!pR(t,l,n)||""===l&&1===e.length){if(Yt(r))return!1;s=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!hR(t.attrs,u,n)){if(Yt(r))return!1;s=!0}continue}const d=mR(8&r?"class":l,i,lE(t),n);if(-1===d){if(Yt(r))return!1;s=!0;continue}if(""!==u){let f;f=d>o?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==sE(h,u,0)||2&r&&u!==f){if(Yt(r))return!1;s=!0}}}}else{if(!s&&!Yt(r)&&!Yt(l))return!1;if(s&&Yt(l))continue;s=!1,r=l|1&r}}return Yt(r)||s}function Yt(t){return 0==(1&t)}function mR(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){const s=e[i];if(s===t)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function vR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function uE(t,e,n=!1){for(let r=0;r<e.length;r++)if(gR(t,e[r],n))return!0;return!1}function cE(t,e){return t?":not("+e.trim()+")":e}function DR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Yt(s)&&(e+=cE(o,i),i=""),r=s,o=o||!Yt(r);n++}return""!==i&&(e+=cE(o,i)),e}const L={};function gt(t){dE(q(),E(),at()+t,!1)}function dE(t,e,n,r){if(!r)if(3==(3&e[2])){const o=t.preOrderCheckHooks;null!==o&&ja(e,o,n)}else{const o=t.preOrderHooks;null!==o&&$a(e,o,0,n)}Fr(n)}function gE(t,e=null,n=null,r){const i=mE(t,e,n,r);return i.resolveInjectorInitializers(),i}function mE(t,e=null,n=null,r,i=new Set){const o=[n||Q,UP(t)];return r=r||("object"==typeof t?void 0:se(t)),new eE(o,e||ul(),r||null,i)}let kn=(()=>{class t{static create(n,r){if(Array.isArray(n))return gE({name:""},r,n,"");{const i=n.name??"";return gE({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=No,t.NULL=new Yv,t.\u0275prov=K({token:t,providedIn:"any",factory:()=>B(qv)}),t.__NG_ELEMENT_ID__=-1,t})();function D(t,e=x.Default){const n=E();return null===n?B(t,e):zy(Ge(),n,P(t),e)}function IE(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=t.data[o];Jc(n[r]),s.contentQueries(2,e[o],o)}}}function hl(t,e,n,r,i,o,s,a,l,u,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||t&&1024&t[2])&&(d[2]|=1024),Iy(d),d[3]=d[15]=t,d[8]=n,d[10]=s||t&&t[10],d[j]=a||t&&t[j],d[12]=l||t&&t[12]||null,d[9]=u||t&&t[9]||null,d[6]=o,d[20]=function kN(){return ON++}(),d[21]=c,d[16]=2==e.type?t[16]:d,d}function Bi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function ef(t,e,n,r,i){const o=Ty(),s=qc(),l=t.data[e]=function KR(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(t,e,n,r,i),function BM(){return F.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Bo(){const t=F.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return cn(o,!0),o}function Xo(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function tf(t,e,n){Xc(e);try{const r=t.viewQuery;null!==r&&ff(1,r,n);const i=t.template;null!==i&&wE(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&IE(t,e),t.staticViewQueries&&ff(2,t.viewQuery,n);const o=t.components;null!==o&&function WR(t,e){for(let n=0;n<e.length;n++)hx(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Zc()}}function pl(t,e,n,r){const i=e[2];if(128!=(128&i)){Xc(e);try{Iy(e),function Ay(t){return F.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&wE(t,e,n,2,r);const s=3==(3&i);if(s){const u=t.preOrderCheckHooks;null!==u&&ja(e,u,null)}else{const u=t.preOrderHooks;null!==u&&$a(e,u,0,null),ed(e,0)}if(function dx(t){for(let e=Cd(t);null!==e;e=Id(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r];512&i[2]||zc(i[3],1),i[2]|=512}}}(e),function cx(t){for(let e=Cd(t);null!==e;e=Id(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Ua(r)&&pl(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&IE(t,e),s){const u=t.contentCheckHooks;null!==u&&ja(e,u)}else{const u=t.contentHooks;null!==u&&$a(e,u,1),ed(e,1)}!function $R(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Fr(~i);else{const o=i,s=n[++r],a=n[++r];UM(s,o),a(2,e[o])}}}finally{Fr(-1)}}(t,e);const a=t.components;null!==a&&function GR(t,e){for(let n=0;n<e.length;n++)fx(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&ff(2,l,r),s){const u=t.viewCheckHooks;null!==u&&ja(e,u)}else{const u=t.viewHooks;null!==u&&$a(e,u,2),ed(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,zc(e[3],-1))}finally{Zc()}}}function wE(t,e,n,r,i){const o=at(),s=2&r;try{Fr(-1),s&&e.length>22&&dE(t,e,22,!1),n(r,i)}finally{Fr(o)}}function nf(t,e,n){if(Gc(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=t.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}function rf(t,e,n){by()&&(function ex(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;Vo(n)&&function ax(t,e,n){const r=wt(e,t),i=bE(n),o=t[10],s=gl(t,hl(t,i,null,n.onPush?32:16,r,e,o,o.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||qa(n,e),Qe(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const l=t.data[a],u=Lr(e,t,a,n);Qe(u,e),null!==s&&lx(0,a-i,u,l,0,s),qt(l)&&(bt(n.index,e)[8]=Lr(e,t,a,n))}}(t,e,n,wt(n,e)),64==(64&n.flags)&&PE(t,e,n))}function of(t,e,n=wt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function bE(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=sf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function sf(t,e,n,r,i,o,s,a,l,u){const c=22+r,d=c+i,f=function zR(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:L);return n}(c,d),h="function"==typeof u?u():u;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function SE(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const o=t[i];null===r?AE(n,e,i,o):r.hasOwnProperty(i)&&AE(n,e,r[i],o)}return n}function AE(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function ME(t,e){const n=bt(e,t);16&n[2]||(n[2]|=32)}function af(t,e,n,r){let i=!1;if(by()){const o=null===r?null:{"":-1},s=function nx(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(uE(e,s.selectors,!1))if(r||(r=[]),qt(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),lf(t,e,a.length)}else r.unshift(s),lf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(t,n);let a,l;null===s?a=l=null:[a,l]=s,null!==a&&(i=!0,NE(t,e,n,a,o,l)),o&&function rx(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const o=n[e[i+1]];if(null==o)throw new b(-301,!1);r.push(e[i],o)}}}(n,r,o)}return n.mergedAttrs=Ho(n.mergedAttrs,n.attrs),i}function NE(t,e,n,r,i,o){for(let u=0;u<r.length;u++)sd(qa(n,e),t,r[u].type);!function ox(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let s=!1,a=!1,l=Xo(t,e,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];n.mergedAttrs=Ho(n.mergedAttrs,c.hostAttrs),sx(t,n,e,l,c),ix(l,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const d=c.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function YR(t,e,n){const i=e.directiveEnd,o=t.data,s=e.attrs,a=[];let l=null,u=null;for(let c=e.directiveStart;c<i;c++){const d=o[c],f=n?n.get(d):null,p=f?f.outputs:null;l=SE(d.inputs,c,l,f?f.inputs:null),u=SE(d.outputs,c,u,p);const g=null===l||null===s||lE(e)?null:ux(l,c,s);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(t,n,o)}function PE(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function HM(){return F.lFrame.currentDirectiveIndex}();try{Fr(o);for(let a=r;a<i;a++){const l=t.data[a],u=e[a];Yc(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&tx(l,u)}}finally{Fr(-1),Yc(s)}}function tx(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function lf(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function ix(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qt(e)&&(n[""]=t)}}function sx(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=kr(i.type)),s=new Uo(o,qt(i),D);t.blueprint[r]=s,n[r]=s,function XR(t,e,n,r,i){const o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function ZR(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(t,e,r,Xo(t,n,i.hostVars,L),i)}function hn(t,e,n,r,i,o){const s=wt(t,e);!function uf(t,e,n,r,i,o,s){if(null==o)t.removeAttribute(e,i,n);else{const a=null==s?O(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}(e[j],s,o,t.value,n,r,i)}function lx(t,e,n,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const u=s[l++],c=s[l++],d=s[l++];null!==a?r.setInput(n,d,u,c):n[c]=d}}}function ux(t,e,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(t.hasOwnProperty(o)){null===r&&(r=[]);const s=t[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function RE(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function fx(t,e){const n=bt(e,t);if(Ua(n)){const r=n[1];48&n[2]?pl(r,n,r.template,n[8]):n[5]>0&&cf(n)}}function cf(t){for(let r=Cd(t);null!==r;r=Id(r))for(let i=10;i<r.length;i++){const o=r[i];if(Ua(o))if(512&o[2]){const s=o[1];pl(s,o,s.template,o[8])}else o[5]>0&&cf(o)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=bt(n[r],t);Ua(i)&&i[5]>0&&cf(i)}}function hx(t,e){const n=bt(e,t),r=n[1];(function px(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),tf(r,n,n[8])}function gl(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function df(t){for(;t;){t[2]|=32;const e=Ko(t);if(DM(t)&&!e)return t;t=e}return null}function ml(t,e,n,r=!0){const i=e[10];i.begin&&i.begin();try{pl(t,e,t.template,n)}catch(s){throw r&&FE(e,s),s}finally{i.end&&i.end()}}function ff(t,e,n){Jc(0),e(t,n)}function xE(t){return t[7]||(t[7]=[])}function OE(t){return t.cleanup||(t.cleanup=[])}function FE(t,e){const n=t[9],r=n?n.get(Fi,null):null;r&&r.handleError(e)}function hf(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],u=t.data[s];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function _l(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Rc(i,a):2==o&&(r=Rc(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function yl(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push($e(o)),zt(o))for(let a=10;a<o.length;a++){const l=o[a],u=l[1].firstChild;null!==u&&yl(l[1],l,u,r)}const s=n.type;if(8&s)yl(t,e,n.child,r);else if(32&s){const a=Dd(n,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Pv(e,n);if(Array.isArray(a))r.push(...a);else{const l=Ko(e[16]);yl(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Zo{get rootNodes(){const e=this._lView,n=e[1];return yl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(zt(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Td(e,r),Ya(n,r))}this._attachedToViewContainer=!1}Cv(this._lView[1],this._lView)}onDestroy(e){!function TE(t,e,n,r){const i=xE(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&OE(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){df(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ml(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function QN(t,e){Yo(t,e,e[j],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e}}class gx extends Zo{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;ml(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class LE extends cl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Z(e);return new es(n,this.ngModule)}}function VE(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class _x{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ra(r);const i=this.injector.get(e,qd,r);return i!==qd||n===qd?i:this.parentInjector.get(e,n,r)}}class es extends nE{get inputs(){return VE(this.componentDef.inputs)}get outputs(){return VE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function CR(t){return t.map(DR).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=(i=i||this.ngModule)instanceof $r?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new _x(e,o):e,a=s.get(iE,null);if(null===a)throw new b(407,!1);const l=s.get(tR,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function qR(t,e,n){return t.selectRootElement(e,n===ln.ShadowDom)}(u,r,this.componentDef.encapsulation):bd(u,c,function mx(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),f=this.componentDef.onPush?288:272,h=sf(0,null,null,1,0,null,null,null,null,null),p=hl(null,h,null,f,null,null,a,u,l,s,null);let g,m;Xc(p);try{const v=this.componentDef;let w,y=null;v.findHostDirectiveDefs?(w=[],y=new Map,v.findHostDirectiveDefs(v,w,y),w.push(v)):w=[v];const A=function vx(t,e){const n=t[1];return t[22]=e,Bi(n,22,2,"#host",null)}(p,d),te=function Ex(t,e,n,r,i,o,s,a){const l=i[1];!function Dx(t,e,n,r){for(const i of t)e.mergedAttrs=Ho(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(_l(e,e.mergedAttrs,!0),null!==n&&Ov(r,n,e))}(r,t,e,s);const u=o.createRenderer(e,n),c=hl(i,bE(n),null,n.onPush?32:16,i[t.index],t,o,u,a||null,null,null);return l.firstCreatePass&&lf(l,t,r.length-1),gl(i,c),i[t.index]=c}(A,d,v,w,p,a,u);m=Cy(h,22),d&&function Ix(t,e,n,r){if(r)nd(t,n,["ng-version",nR.full]);else{const{attrs:i,classes:o}=function IR(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Yt(i))break;i=o}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&nd(t,n,i),o&&o.length>0&&xv(t,n,o.join(" "))}}(u,v,d,r),void 0!==n&&function wx(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(m,this.ngContentSelectors,n),g=function Cx(t,e,n,r,i,o){const s=Ge(),a=i[1],l=wt(s,i);NE(a,i,s,n,null,r);for(let c=0;c<n.length;c++)Qe(Lr(i,a,s.directiveStart+c,s),i);PE(a,i,s),l&&Qe(l,i);const u=Lr(i,a,s.directiveStart+s.componentOffset,s);if(t[8]=i[8]=u,null!==o)for(const c of o)c(u,e);return nf(a,s,t),u}(te,v,w,y,p,[bx]),tf(h,p,null)}finally{Zc()}return new yx(this.componentType,g,ki(m,p),p,m)}}class yx extends YP{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new gx(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;hf(o[1],o,i,e,n),ME(o,this._tNode.index)}}get injector(){return new Ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function bx(){const t=Ge();Ha(E()[1],t)}function ne(t){let e=function BE(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(qt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new b(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const s=t;s.inputs=pf(t.inputs),s.declaredInputs=pf(t.declaredInputs),s.outputs=pf(t.outputs);const a=i.hostBindings;a&&Mx(t,a);const l=i.viewQuery,u=i.contentQueries;if(l&&Sx(t,l),u&&Ax(t,u),Pc(t.inputs,i.inputs),Pc(t.declaredInputs,i.declaredInputs),Pc(t.outputs,i.outputs),qt(i)&&i.data.animation){const c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(t),a===ne&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Tx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ho(i.hostAttrs,n=Ho(n,i.hostAttrs))}}(r)}function pf(t){return t===Tn?{}:t===Q?[]:t}function Sx(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ax(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,o)=>{e(r,i,o),n(r,i,o)}:e}function Mx(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}let vl=null;function Wr(){if(!vl){const t=le.Symbol;if(t&&t.iterator)vl=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(vl=r)}}}return vl}function El(t){return!!function gf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Wr()in t)}function Je(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ln(t,e,n,r){const i=E();return Je(i,wi(),e)&&(q(),hn(ye(),i,t,e,n,r)),Ln}function qr(t,e,n,r,i,o,s,a){const l=E(),u=q(),c=t+22,d=u.firstCreatePass?function Bx(t,e,n,r,i,o,s,a,l){const u=e.consts,c=Bi(e,t,4,s||null,tr(u,a));af(e,n,c,tr(u,l)),Ha(e,c);const d=c.tViews=sf(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,o,s):u.data[c];cn(d,!1);const f=l[j].createComment("");nl(u,l,f,d),Qe(f,l),gl(l,l[c]=RE(f,l,f,d)),Va(d)&&rf(u,l,d),null!=s&&of(l,d,a)}function mf(t){return Ii(function VM(){return F.lFrame.contextLView}(),22+t)}function lt(t,e,n){const r=E();return Je(r,wi(),e)&&function At(t,e,n,r,i,o,s,a){const l=wt(e,n);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(hf(t,n,c,r,i),Vo(e)&&ME(n,e.index)):3&e.type&&(r=function QR(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}(q(),ye(),r,t,e,r[j],n,!1),lt}function _f(t,e,n,r,i){const s=i?"class":"style";hf(t,n,e.inputs[s],s,r)}function ve(t,e,n,r){const i=E(),o=q(),s=22+t,a=i[j],l=i[s]=bd(a,e,function YM(){return F.lFrame.currentNamespace}()),u=o.firstCreatePass?function Hx(t,e,n,r,i,o,s){const a=e.consts,u=Bi(e,t,2,i,tr(a,o));return af(e,n,u,tr(a,s)),null!==u.attrs&&_l(u,u.attrs,!1),null!==u.mergedAttrs&&_l(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];return cn(u,!0),Ov(a,l,u),32!=(32&u.flags)&&nl(o,i,l,u),0===function xM(){return F.lFrame.elementDepthCount}()&&Qe(l,i),function OM(){F.lFrame.elementDepthCount++}(),Va(u)&&(rf(o,i,u),nf(o,u,i)),null!==r&&of(i,u),ve}function be(){let t=Ge();qc()?function Kc(){F.lFrame.isParent=!1}():(t=t.parent,cn(t,!1));const e=t;!function kM(){F.lFrame.elementDepthCount--}();const n=q();return n.firstCreatePass&&(Ha(n,t),Gc(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function ZM(t){return 0!=(8&t.flags)}(e)&&_f(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function eN(t){return 0!=(16&t.flags)}(e)&&_f(n,e,E(),e.stylesWithoutHost,!1),be}function Lt(t,e,n,r){return ve(t,e,n,r),be(),Lt}function ns(){return E()}function Cl(t){return!!t&&"function"==typeof t.then}const eD=function ZE(t){return!!t&&"function"==typeof t.subscribe};function Ve(t,e,n,r){const i=E(),o=q(),s=Ge();return function nD(t,e,n,r,i,o,s){const a=Va(r),u=t.firstCreatePass&&OE(t),c=e[8],d=xE(e);let f=!0;if(3&r.type||s){const g=wt(r,e),m=s?s(g):g,v=d.length,w=s?A=>s($e(A[r.index])):r.index;let y=null;if(!s&&a&&(y=function $x(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(t,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,f=!1;else{o=iD(r,e,c,o,!1);const A=n.listen(m,i,o);d.push(o,A),u&&u.push(i,w,v,v+1)}}else o=iD(r,e,c,o,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const te=e[p[m]][p[m+1]].subscribe(o),pe=d.length;d.push(o,te),u&&u.push(i,r.index,pe,-(pe+1))}}}(o,i,i[j],s,t,e,r),Ve}function rD(t,e,n,r){try{return!1!==n(r)}catch(i){return FE(t,i),!1}}function iD(t,e,n,r,i){return function o(s){if(s===Function)return r;df(t.componentOffset>-1?bt(t.index,e):e);let l=rD(e,0,r,s),u=o.__ngNextListenerFn__;for(;u;)l=rD(e,0,u,s)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Mt(t=1){return function $M(t){return(F.lFrame.contextLView=function GM(t,e){for(;t>0;)e=e[15],t--;return e}(t,F.lFrame.contextLView))[8]}(t)}function Il(t,e){return t<<17|e<<2}function ir(t){return t>>17&32767}function Df(t){return 2|t}function Kr(t){return(131068&t)>>2}function Cf(t,e){return-131069&t|e<<2}function If(t){return 1|t}function pD(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ir(o):Kr(o),l=!1;for(;0!==a&&(!1===l||s);){const c=t[a+1];Xx(t[a],e)&&(l=!0,t[a+1]=r?If(c):Df(c)),a=r?ir(c):Kr(c)}l&&(t[n+1]=r?Df(o):If(o))}function Xx(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Pi(t,e)>=0}function wl(t,e){return function Qt(t,e,n,r){const i=E(),o=q(),s=function Rn(t){const e=F.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);o.firstUpdatePass&&function ID(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[at()],s=function CD(t,e){return e>=t.expandoStartIndex}(t,n);(function SD(t,e){return 0!=(t.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function aO(t,e,n,r){const i=function Qc(t){const e=F.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=rs(n=wf(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=wf(i,t,e,n,r),null===o){let l=function lO(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Kr(r))return t[ir(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=wf(null,t,e,l[1],r),l=rs(l,e.attrs,r),function uO(t,e,n,r){t[ir(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else o=function cO(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=rs(r,t[o].hostAttrs,n);return rs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function Qx(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ir(s),l=Kr(s);t[r]=n;let c,u=!1;if(Array.isArray(n)?(c=n[1],(null===c||Pi(n,c)>0)&&(u=!0)):c=n,i)if(0!==l){const f=ir(t[a+1]);t[r+1]=Il(f,a),0!==f&&(t[f+1]=Cf(t[f+1],r)),t[a+1]=function Kx(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Il(a,0),0!==a&&(t[a+1]=Cf(t[a+1],r)),a=r;else t[r+1]=Il(l,0),0===a?a=r:t[l+1]=Cf(t[l+1],r),l=r;u&&(t[r+1]=Df(t[r+1])),pD(t,c,r,!0),pD(t,c,r,!1),function Jx(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Pi(o,e)>=0&&(n[r+1]=If(n[r+1]))}(e,c,t,r,o),s=Il(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}(o,t,s,r),e!==L&&Je(i,s,e)&&function bD(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,u=l[a+1],c=function Yx(t){return 1==(1&t)}(u)?TD(l,e,n,i,Kr(u),s):void 0;bl(c)||(bl(o)||function qx(t){return 2==(2&t)}(u)&&(o=TD(l,null,n,i,a,s)),function sP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:ht.DashCase;null==i?t.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ht.Important),t.setStyle(n,r,i,o))}}(r,s,Ba(at(),n),i,o))}(o,o.data[at()],i,i[j],t,i[s+1]=function hO(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=se(St(t)))),t}(e,n),r,s)}(t,e,null,!0),wl}function wf(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=rs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function rs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Tt(t,s,!!n||e[++o]))}return void 0===t?null:t}function TD(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const l=t[i],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=n[i+1];f===L&&(f=d?Q:void 0);let h=d?dd(f,r):c===r?f:void 0;if(u&&!bl(h)&&(h=dd(l,r)),bl(h)&&(a=h,s))return a;const p=t[i+1];i=s?ir(p):Kr(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=dd(l,r))}return a}function bl(t){return void 0!==t}function Xe(t,e=""){const n=E(),r=q(),i=t+22,o=r.firstCreatePass?Bi(r,i,1,e,null):r.data[i],s=n[i]=function wd(t,e){return t.createText(e)}(n[j],e);nl(r,n,s,o),cn(o,!1)}function Qi(t,e,n){const r=E(),i=function Hi(t,e,n,r){return Je(t,wi(),n)?e+O(n)+r:L}(r,t,e,n);return i!==L&&function Fn(t,e,n){const r=Ba(e,t);!function Ev(t,e,n){t.setValue(e,n)}(t[j],r,n)}(r,at(),i),Qi}const Xi="en-US";let QD=Xi;function Sf(t,e,n,r,i){if(t=P(t),Array.isArray(t))for(let o=0;o<t.length;o++)Sf(t[o],e,n,r,i);else{const o=q(),s=E();let a=jr(t)?t:P(t.provide),l=tE(t);const u=Ge(),c=1048575&u.providerIndexes,d=u.directiveStart,f=u.providerIndexes>>20;if(jr(t)||!t.multi){const h=new Uo(l,i,D),p=Mf(a,e,i?c:c+f,d);-1===p?(sd(qa(u,s),o,a),Af(o,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=Mf(a,e,c+f,d),p=Mf(a,e,c,c+f),m=p>=0&&n[p];if(i&&!m||!i&&!(h>=0&&n[h])){sd(qa(u,s),o,a);const v=function Pk(t,e,n,r,i){const o=new Uo(t,n,D);return o.multi=[],o.index=e,o.componentProviders=0,DC(o,i,r&&!n),o}(i?Nk:Mk,n.length,i,r,l);!i&&m&&(n[p].providerFactory=v),Af(o,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(v),s.push(v)}else Af(o,t,h>-1?h:p,DC(n[i?p:h],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Af(t,e,n,r){const i=jr(e),o=function jP(t){return!!t.useClass}(e);if(i||o){const l=(o?P(e.useClass):e).prototype.ngOnDestroy;if(l){const u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const c=u.indexOf(n);-1===c?u.push(n,[r,l]):u[c+1].push(r,l)}else u.push(n,l)}}}function DC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Mf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Mk(t,e,n,r){return Nf(this.multi,[])}function Nk(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Lr(n,n[1],this.providerFactory.index,r);o=a.slice(0,s),Nf(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Nf(i,o);return o}function Nf(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function me(t,e=[]){return n=>{n.providersResolver=(r,i)=>function Ak(t,e,n){const r=q();if(r.firstCreatePass){const i=qt(t);Sf(n,r.data,r.blueprint,i,!0),Sf(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class Zi{}class Rk{}class CC extends Zi{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new LE(this);const r=function Ct(t,e){const n=t[ly]||null;if(!n&&!0===e)throw new Error(`Type ${se(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function On(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=mE(e,n,[{provide:Zi,useValue:this},{provide:cl,useValue:this.componentFactoryResolver}],se(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Pf extends Rk{constructor(e){super(),this.moduleType=e}create(e){return new CC(this.moduleType,e)}}function NC(t,e,n,r,i,o){const s=e+n;return Je(t,s,i)?function pn(t,e,n){return t[e]=n}(t,s+1,o?r.call(o,i):r(i)):function us(t,e){const n=t[e];return n===L?void 0:n}(t,s+1)}function xf(t,e){const n=q();let r;const i=t+22;n.firstCreatePass?(r=function tF(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=kr(r.type)),s=xt(D);try{const a=za(!1),l=o();return za(a),function Ux(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,E(),i,l),l}finally{xt(s)}}function Of(t,e,n){const r=t+22,i=E(),o=Ii(i,r);return function cs(t,e){return t[1].data[e].pure}(i,r)?NC(i,function st(){const t=F.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,o):o.transform(n)}function kf(t){return e=>{setTimeout(t,void 0,e)}}const Ze=class sF extends bc{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=kf(o),i&&(i=kf(i)),s&&(s=kf(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof sn&&e.add(a),a}};let Vn=(()=>{class t{}return t.__NG_ELEMENT_ID__=cF,t})();const lF=Vn,uF=class extends lF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=hl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),tf(r,i,e),new Zo(i)}};function cF(){return function Nl(t,e){return 4&t.type?new uF(e,t,ki(t,e)):null}(Ge(),E())}let _n=(()=>{class t{}return t.__NG_ELEMENT_ID__=dF,t})();function dF(){return function LC(t,e){let n;const r=e[t.index];if(zt(r))n=r;else{let i;if(8&t.type)i=$e(r);else{const o=e[j];i=o.createComment("");const s=wt(t,e);Br(o,tl(o,s),i,function rP(t,e){return t.nextSibling(e)}(o,s),!1)}e[t.index]=n=RE(r,e,i,t),gl(e,n)}return new kC(n,t,e)}(Ge(),E())}const fF=_n,kC=class extends fF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ki(this._hostTNode,this._hostLView)}get injector(){return new Ti(this._hostTNode,this._hostLView)}get parentInjector(){const e=od(this._hostTNode,this._hostLView);if(Uy(e)){const n=Wa(e,this._hostLView),r=Ga(e);return new Ti(n[1].data[r+8],n)}return new Ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=FC(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(n||{},o);return this.insert(s,i),s}createComponent(e,n,r,i,o){const s=e&&!function $o(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new es(Z(e)),u=r||this.parentInjector;if(!o&&null==l.ngModule){const f=(s?u:this.parentInjector).get($r,null);f&&(o=f)}const c=l.create(u,i,void 0,o);return this.insert(c.hostView,a),c}insert(e,n){const r=e._lView,i=r[1];if(function RM(t){return zt(t[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],f=new kC(d,d[6],d[3]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(n),s=this._lContainer;!function XN(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],Xy(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function ZN(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,s,o);const a=Md(o,s),l=r[j],u=tl(l,s[7]);return null!==u&&function YN(t,e,n,r,i,o){r[0]=i,r[6]=e,Yo(t,r,n,1,i,o)}(i,s[6],l,r,u,a),e.attachToViewContainerRef(),Xy(Lf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=FC(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Td(this._lContainer,n);r&&(Ya(Lf(this._lContainer),n),Cv(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Td(this._lContainer,n);return r&&null!=Ya(Lf(this._lContainer),n)?new Zo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function FC(t){return t[8]}function Lf(t){return t[8]||(t[8]=[])}function Rl(...t){}const aI=new M("Application Initializer");let xl=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Rl,this.reject=Rl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Cl(o))n.push(o);else if(eD(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(B(aI,8))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fs=new M("AppId",{providedIn:"root",factory:function lI(){return`${qf()}${qf()}${qf()}`}});function qf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const uI=new M("Platform Initializer"),Kf=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$F=new M("appBootstrapListener"),Bn=new M("LocaleId",{providedIn:"root",factory:()=>yi(Bn,x.Optional|x.SkipSelf)||function GF(){return typeof $localize<"u"&&$localize.locale||Xi}()}),YF=(()=>Promise.resolve(0))();function Yf(t){typeof Zone>"u"?YF.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function QF(){let t=le.requestAnimationFrame,e=le.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function ZF(t){const e=()=>{!function XF(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(le,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Jf(t),t.isCheckStableRunning=!0,Qf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Jf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return fI(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),hI(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return fI(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),hI(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Jf(t),Qf(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!et.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(et.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,JF,Rl,Rl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const JF={};function Qf(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Jf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function fI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function hI(t){t._nesting--,Qf(t)}class eL{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const pI=new M(""),Ol=new M("");let eh,Xf=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,eh||(function tL(t){eh=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{et.assertNotInAngularZone(),Yf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yf(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(B(et),B(Zf),B(Ol))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),Zf=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return eh?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),or=null;const gI=new M("AllowMultipleToken"),th=new M("PlatformDestroyListeners");function _I(t,e,n=[]){const r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=nh();if(!s||s.injector.get(gI,!1)){const a=[...n,...o,{provide:i,useValue:!0}];t?t(a):function iL(t){if(or&&!or.get(gI,!1))throw new b(400,!1);or=t;const e=t.get(vI);(function mI(t){const e=t.get(uI,null);e&&e.forEach(n=>n())})(t)}(function yI(t=[],e){return kn.create({name:e,providers:[{provide:$d,useValue:"platform"},{provide:th,useValue:new Set([()=>or=null])},...t]})}(a,r))}return function sL(t){const e=nh();if(!e)throw new b(401,!1);return e}()}}function nh(){return or?.get(vI)??null}let vI=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function DI(t,e){let n;return n="noop"===t?new eL:("zone.js"===t?void 0:t)||new et(e),n}(r?.ngZone,function EI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:et,useValue:i}];return i.run(()=>{const s=kn.create({providers:o,parent:this.injector,name:n.moduleType.name}),a=n.create(s),l=a.injector.get(Fi,null);if(!l)throw new b(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{kl(this._modules,a),u.unsubscribe()})}),function CI(t,e,n){try{const r=n();return Cl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(xl);return u.runInitializers(),u.donePromise.then(()=>(function JD(t){Rt(t,"Expected localeId to be defined"),"string"==typeof t&&(QD=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Bn,Xi)||Xi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=II({},r);return function nL(t,e,n){const r=new Pf(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(rh);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new b(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(th,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(B(kn))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function II(t,e){return Array.isArray(e)?e.reduce(II,t):{...t,...e}}let rh=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new We(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new We(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),Yf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=function Z0(...t){const e=X_(t),n=function z0(t,e){return"number"==typeof Ac(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?bn(r[0]):function j0(t=1/0){return ba(O_,t)}(n)(Mc(r,e)):Sc}(o,s.pipe(function eM(t={}){const{connector:e=(()=>new bc),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=l=void 0,c=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return Nr((g,m)=>{u++,!d&&!c&&f();const v=l=l??e();m.add(()=>{u--,0===u&&!d&&!c&&(a=Nc(p,i))}),v.subscribe(m),!s&&u>0&&(s=new Mo({next:w=>v.next(w),error:w=>{d=!0,f(),a=Nc(h,n,w),v.error(w)},complete:()=>{c=!0,f(),a=Nc(h,r),v.complete()}}),bn(g).subscribe(s))})(o)}}()))}bootstrap(n,r){const i=n instanceof nE;if(!this._injector.get(xl).done)throw!i&&function Oo(t){const e=Z(t)||ze(t)||it(t);return null!==e&&e.standalone}(n),new b(405,false);let s;s=i?n:this._injector.get(cl).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function rL(t){return t.isBoundToModule}(s)?void 0:this._injector.get(Zi),u=s.create(kn.NULL,[],r||s.selector,a),c=u.location.nativeElement,d=u.injector.get(pI,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),kl(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;kl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get($F,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>kl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(B(et),B($r),B(Fi))},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class MI{constructor(){}supports(e){return El(e)}create(e){return new gL(e)}}const pL=(t,e)=>e;class gL{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pL}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<PI(r,i,o)?n:r,a=PI(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<o.length?o[f]:o[f]=0,p=h+f;c<=p&&p<u&&(o[f]=h+1)}o[s.previousIndex]=c-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!El(e))throw new b(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function Fx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Wr()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new mL(n,r),o,i),e}_verifyReinsertion(e,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new NI),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NI),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class mL{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _L{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class NI{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new _L,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function PI(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xI(){return new Vl([new MI])}let Vl=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||xI()),deps:[[t,new Xa,new Ja]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new b(901,!1)}}return t.\u0275prov=K({token:t,providedIn:"root",factory:xI}),t})();const CL=_I(null,"core",[]);let IL=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(B(rh))},t.\u0275mod=An({type:t}),t.\u0275inj=an({}),t})();function lh(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let uh=null;function Jr(){return uh}class TL{}const Vt=new M("DocumentToken");function GI(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class h1{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let KI=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new h1(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),YI(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{YI(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(D(_n),D(Vn),D(Vl))},t.\u0275dir=k({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function YI(t,e){t.context.$implicit=e.item}let QI=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new g1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){JI("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){JI("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(D(_n),D(Vn))},t.\u0275dir=k({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class g1{constructor(){this.$implicit=null,this.ngIf=null}}function JI(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${se(e)}'.`)}let ZI=(()=>{class t{transform(n){return JSON.stringify(n,null,2)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=rt({name:"json",type:t,pure:!1,standalone:!0}),t})(),B1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=an({}),t})();class rw{}class mV extends TL{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Sh extends mV{static makeCurrent(){!function bL(t){uh||(uh=t)}(new Sh)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function _V(){return _s=_s||document.querySelector("base"),_s?_s.getAttribute("href"):null}();return null==n?null:function yV(t){Yl=Yl||document.createElement("a"),Yl.setAttribute("href",t);const e=Yl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){_s=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return GI(document.cookie,e)}}let Yl,_s=null;const lw=new M("TRANSITION_ID"),EV=[{provide:aI,useFactory:function vV(t,e,n){return()=>{n.get(xl).donePromise.then(()=>{const r=Jr(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[lw,Vt,kn],multi:!0}];let CV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const Ql=new M("EventManagerPlugins");let Jl=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(B(Ql),B(et))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();class uw{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Jr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let cw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})(),ys=(()=>{class t extends cw{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(dw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(dw))}}return t.\u0275fac=function(n){return new(n||t)(B(Vt))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();function dw(t){Jr().remove(t)}const Ah={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mh=/%COMP%/g;function Nh(t,e){return e.flat(100).map(n=>n.replace(Mh,t))}function pw(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ph=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Rh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case ln.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new AV(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case ln.ShadowDom:return new MV(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Nh(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(B(Jl),B(ys),B(fs))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();class Rh{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Ah[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(mw(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(mw(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const o=Ah[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Ah[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ht.DashCase|ht.Important)?e.style.setProperty(n,r,i&ht.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ht.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,pw(r)):this.eventManager.addEventListener(e,n,pw(r))}}function mw(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class AV extends Rh{constructor(e,n,r,i){super(e),this.component=r;const o=Nh(i+"-"+r.id,r.styles);n.addStyles(o),this.contentAttr=function bV(t){return"_ngcontent-%COMP%".replace(Mh,t)}(i+"-"+r.id),this.hostAttr=function TV(t){return"_nghost-%COMP%".replace(Mh,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class MV extends Rh{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Nh(i.id,i.styles);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let NV=(()=>{class t extends uw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(B(Vt))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const _w=["alt","control","meta","shift"],PV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let xV=(()=>{class t extends uw{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const o=t.parseEventName(r),s=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jr().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_w.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let i=PV[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),_w.forEach(s=>{s!==i&&(0,RV[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(B(Vt))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const LV=_I(CL,"browser",[{provide:Kf,useValue:"browser"},{provide:uI,useValue:function OV(){Sh.makeCurrent()},multi:!0},{provide:Vt,useFactory:function FV(){return function dP(t){xd=t}(document),document},deps:[]}]),Ew=new M(""),Dw=[{provide:Ol,useClass:class DV{addToWindow(e){le.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},le.getAllAngularTestabilities=()=>e.getAllTestabilities(),le.getAllAngularRootElements=()=>e.getAllRootElements(),le.frameworkStabilizers||(le.frameworkStabilizers=[]),le.frameworkStabilizers.push(r=>{const i=le.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Jr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:pI,useClass:Xf,deps:[et,Zf,Ol]},{provide:Xf,useClass:Xf,deps:[et,Zf,Ol]}],Cw=[{provide:$d,useValue:"root"},{provide:Fi,useFactory:function kV(){return new Fi},deps:[]},{provide:Ql,useClass:NV,multi:!0,deps:[Vt,et,Kf]},{provide:Ql,useClass:xV,multi:!0,deps:[Vt]},{provide:Ph,useClass:Ph,deps:[Jl,ys,fs]},{provide:iE,useExisting:Ph},{provide:cw,useExisting:ys},{provide:ys,useClass:ys,deps:[Vt]},{provide:Jl,useClass:Jl,deps:[Ql,et]},{provide:rw,useClass:CV,deps:[]},[]];let VV=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:fs,useValue:n.appId},{provide:lw,useExisting:fs},EV]}}}return t.\u0275fac=function(n){return new(n||t)(B(Ew,12))},t.\u0275mod=An({type:t}),t.\u0275inj=an({providers:[...Cw,...Dw],imports:[B1,IL]}),t})();typeof window<"u"&&window;let bw=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:function(n){let r=null;return r=n?new(n||t):B(Tw),r},providedIn:"root"}),t})(),Tw=(()=>{class t extends bw{constructor(n){super(),this._doc=n}sanitize(n,r){if(null==r)return null;switch(n){case ue.NONE:return r;case ue.HTML:return fn(r,"HTML")?St(r):Wv(this._doc,String(r)).toString();case ue.STYLE:return fn(r,"Style")?St(r):r;case ue.SCRIPT:if(fn(r,"Script"))return St(r);throw new Error("unsafe value used in a script context");case ue.URL:return fn(r,"URL")?St(r):sl(String(r));case ue.RESOURCE_URL:if(fn(r,"ResourceURL"))return St(r);throw new Error(`unsafe value used in a resource URL context (see ${Ta})`);default:throw new Error(`Unexpected SecurityContext ${n} (see ${Ta})`)}}bypassSecurityTrustHtml(n){return function yP(t){return new fP(t)}(n)}bypassSecurityTrustStyle(n){return function vP(t){return new hP(t)}(n)}bypassSecurityTrustScript(n){return function EP(t){return new pP(t)}(n)}bypassSecurityTrustUrl(n){return function DP(t){return new gP(t)}(n)}bypassSecurityTrustResourceUrl(n){return function CP(t){return new mP(t)}(n)}}return t.\u0275fac=function(n){return new(n||t)(B(Vt))},t.\u0275prov=K({token:t,factory:function(n){let r=null;return r=n?new n:function qV(t){return new Tw(t.get(Vt))}(B(kn)),r},providedIn:"root"}),t})();const{isArray:KV}=Array,{getPrototypeOf:YV,prototype:QV,keys:JV}=Object;const{isArray:eB}=Array;function rB(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function iB(...t){const e=function W0(t){return ge(Ac(t))?t.pop():void 0}(t),{args:n,keys:r}=function XV(t){if(1===t.length){const e=t[0];if(KV(e))return{args:e,keys:null};if(function ZV(t){return t&&"object"==typeof t&&YV(t)===QV}(e)){const n=JV(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t),i=new We(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let l=s,u=s;for(let c=0;c<s;c++){let d=!1;bn(n[c]).subscribe(Pr(o,f=>{d||(d=!0,u--),a[c]=f},()=>l--,void 0,()=>{(!l||!d)&&(u||o.next(r?rB(r,a):a),o.complete())}))}});return e?i.pipe(function nB(t){return Rr(e=>function tB(t,e){return eB(e)?t(...e):t(e)}(t,e))}(e)):i}let Sw=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(D(Gr),D(Kt))},t.\u0275dir=k({type:t}),t})(),Xr=(()=>{class t extends Sw{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Ye(t)))(r||t)}}(),t.\u0275dir=k({type:t,features:[ne]}),t})();const yn=new M("NgValueAccessor"),sB={provide:yn,useExisting:ae(()=>Xl),multi:!0},lB=new M("CompositionEventMode");let Xl=(()=>{class t extends Sw{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function aB(){const t=Jr()?Jr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(D(Gr),D(Kt),D(lB,8))},t.\u0275dir=k({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Ve("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[me([sB]),ne]}),t})();const tt=new M("NgValidators"),lr=new M("NgAsyncValidators");function Rw(t){return function ar(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}(t.value)?{required:!0}:null}function Zl(t){return null}function Vw(t){return null!=t}function Bw(t){return Cl(t)?Mc(t):t}function Uw(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function Hw(t,e){return e.map(n=>n(t))}function jw(t){return t.map(e=>function dB(t){return!t.validate}(e)?e:n=>e.validate(n))}function kh(t){return null!=t?function $w(t){if(!t)return null;const e=t.filter(Vw);return 0==e.length?null:function(n){return Uw(Hw(n,e))}}(jw(t)):null}function Fh(t){return null!=t?function Gw(t){if(!t)return null;const e=t.filter(Vw);return 0==e.length?null:function(n){return iB(Hw(n,e).map(Bw)).pipe(Rr(Uw))}}(jw(t)):null}function Ww(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function zw(t){return t._rawValidators}function qw(t){return t._rawAsyncValidators}function Lh(t){return t?Array.isArray(t)?t:[t]:[]}function eu(t,e){return Array.isArray(t)?t.includes(e):t===e}function Kw(t,e){const n=Lh(e);return Lh(t).forEach(i=>{eu(n,i)||n.push(i)}),n}function Yw(t,e){return Lh(e).filter(n=>!eu(t,n))}class Qw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class dt extends Qw{get formDirective(){return null}get path(){return null}}class ur extends Qw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Jw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xw=(()=>{class t extends Jw{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(D(ur,2))},t.\u0275dir=k({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&wl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ne]}),t})(),Zw=(()=>{class t extends Jw{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(D(dt,10))},t.\u0275dir=k({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&wl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ne]}),t})();const vs="VALID",nu="INVALID",no="PENDING",Es="DISABLED";function Hh(t){return(ru(t)?t.validators:t)||null}function jh(t,e){return(ru(e)?e.asyncValidators:t)||null}function ru(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function tb(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function nb(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new b(1002,"")})}class iu{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vs}get invalid(){return this.status===nu}get pending(){return this.status==no}get disabled(){return this.status===Es}get enabled(){return this.status!==Es}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Kw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Kw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Yw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Yw(e,this._rawAsyncValidators))}hasValidator(e){return eu(this._rawValidators,e)}hasAsyncValidator(e){return eu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=no,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Es,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=vs,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vs||this.status===no)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Es:vs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=no,this._hasOwnPendingAsyncValidator=!0;const n=Bw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Es:this.errors?nu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(no)?no:this._anyControlsHaveStatus(nu)?nu:vs}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ru(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function yB(t){return Array.isArray(t)?kh(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function vB(t){return Array.isArray(t)?Fh(t):t||null}(this._rawAsyncValidators)}}class cr extends iu{constructor(e,n,r){super(Hh(n),jh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){nb(this,0,e),Object.keys(e).forEach(r=>{tb(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class rb extends cr{}const ro=new M("CallSetDisabledState",{providedIn:"root",factory:()=>ou}),ou="always";function Ds(t,e,n=ou){$h(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function DB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ib(t,e)})}(t,e),function IB(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function CB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ib(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function EB(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function au(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),uu(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function lu(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function $h(t,e){const n=zw(t);null!==e.validator?t.setValidators(Ww(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=qw(t);null!==e.asyncValidator?t.setAsyncValidators(Ww(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();lu(e._rawValidators,i),lu(e._rawAsyncValidators,i)}function uu(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=zw(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(null!==e.asyncValidator){const i=qw(t);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}const r=()=>{};return lu(e._rawValidators,r),lu(e._rawAsyncValidators,r),n}function ib(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ab(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function lb(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const tn=class extends iu{constructor(e=null,n,r){super(Hh(n),jh(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ru(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=lb(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ab(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ab(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){lb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let hb=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=k({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),gb=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=an({}),t})();const Kh=new M("NgModelWithFormControlWarning"),LB={provide:dt,useExisting:ae(()=>cu)};let cu=(()=>{class t extends dt{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ze,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return Ds(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){au(n.control||null,n,!1),function SB(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function sb(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(au(r||null,n),(t=>t instanceof tn)(i)&&(Ds(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function ob(t,e){$h(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function wB(t,e){return uu(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$h(this.form,this),this._oldForm&&uu(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(n){return new(n||t)(D(tt,10),D(lr,10),D(ro,8))},t.\u0275dir=k({type:t,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&Ve("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[me([LB]),ne,Nn]}),t})();const UB={provide:ur,useExisting:ae(()=>Jh)};let Jh=(()=>{class t extends ur{set isDisabled(n){}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Ze,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function zh(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Xl?n=o:function TB(t){return Object.getPrototypeOf(t.constructor)===Xr}(o)?r=o:i=o}),i||r||n||null}(0,o)}ngOnChanges(n){this._added||this._setUpControl(),function Wh(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function su(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(n){return new(n||t)(D(dt,13),D(tt,10),D(lr,10),D(yn,10),D(Kh,8))},t.\u0275dir=k({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[me([UB]),ne,Nn]}),t})(),Zr=(()=>{class t{constructor(){this._validator=Zl}ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Zl,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=k({type:t,features:[Nn]}),t})();const YB={provide:tt,useExisting:ae(()=>du),multi:!0};let du=(()=>{class t extends Zr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=lh,this.createValidator=n=>Rw}enabled(n){return n}}return t.\u0275fac=function(){let e;return function(r){return(e||(e=Ye(t)))(r||t)}}(),t.\u0275dir=k({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){2&n&&Ln("required",r._enabled?"":null)},inputs:{required:"required"},features:[me([YB]),ne]}),t})(),tU=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=an({imports:[gb]}),t})();class Pb extends iu{constructor(e,n,r){super(Hh(n),jh(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){nb(this,0,e),e.forEach((r,i)=>{tb(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Rb(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let nU=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return Rb(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new cr(i,o)}record(n,r=null){const i=this._reduceControls(n);return new rb(i,r)}control(n,r,i){let o={};return this.useNonNullable?(Rb(r)?o=r:(o.validators=r,o.asyncValidators=i),new tn(n,{...o,nonNullable:!0})):new tn(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new Pb(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof tn||n instanceof iu?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=K({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rU=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Kh,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:ro,useValue:n.callSetDisabledState??ou}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=an({imports:[tU]}),t})();function xb(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function _(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(l){xb(o,r,i,s,a,"next",l)}function a(l){xb(o,r,i,s,a,"throw",l)}s(void 0)})}}const C=function(t,e){if(!t)throw io(e)},io=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},Ob=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},tp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0;let f=(15&a)<<2|u>>6,h=63&u;l||(h=64,s||(f=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ob(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const l=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==d)throw Error();r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kb=function(t){const e=Ob(t);return tp.encodeByteArray(e,!0)},fu=function(t){return kb(t).replace(/\./g,"")},hu=function(t){try{return tp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oU(t){return Fb(void 0,t)}function Fb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!sU(n)||(t[n]=Fb(t[n],e[n]));return t}function sU(t){return"__proto__"!==t}const pu=()=>{try{return function aU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hu(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},Lb=t=>{var e,n;return null===(n=null===(e=pu())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},Vb=t=>{var e;return null===(e=pu())||void 0===e?void 0:e[`_${t}`]};class Is{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function np(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Bb(){return"object"==typeof navigator&&"ReactNative"===navigator.product}class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ws.prototype.create)}}class ws{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function EU(t,e){return t.replace(DU,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new dr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const DU=/\{\$([^}]+)}/g;function bs(t){return JSON.parse(t)}function ke(t){return JSON.stringify(t)}const gu=function(t){let e={},n={},r={},i="";try{const o=t.split(".");e=bs(hu(o[0])||""),n=bs(hu(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function $n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function oo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mu(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function _u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Ub(o)&&Ub(s)){if(!_u(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ub(t){return null!==t&&"object"==typeof t}function Ts(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ss(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function As(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class wU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(f<<1|f>>>31)}let u,c,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^o&(s^a),c=1518500249):(u=o^s^a,c=1859775393):d<60?(u=o&s|a&(o|s),c=2400959708):(u=o^s^a,c=3395469782);const f=(i<<5|i>>>27)+u+l+c+r[d]&4294967295;l=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(0===s)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(o[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=e[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}class TU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function SU(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=ip),void 0===i.error&&(i.error=ip),void 0===i.complete&&(i.complete=ip);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ip(){}function so(t,e){return`${t} failed: ${e} argument `}const yu=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function _t(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ti="[DEFAULT]";class OU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Is;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function FU(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return _(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===ti?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class LU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const op=[];var re=(()=>{return(t=re||(re={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",re;var t})();const Hb={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},VU=re.INFO,BU={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},UU=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=BU[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class sp{constructor(e){this.name=e,this._logLevel=VU,this._logHandler=UU,this._userLogHandler=null,op.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Hb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}let jb,$b;const Gb=new WeakMap,ap=new WeakMap,Wb=new WeakMap,lp=new WeakMap,up=new WeakMap;let cp={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return ap.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Wb.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function KU(t){return"function"==typeof t?function qU(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $U(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(dp(this),e),fr(Gb.get(this))}:function(...e){return fr(t.apply(dp(this),e))}:function(e,...n){const r=t.call(dp(this),e,...n);return Wb.set(r,e.sort?e.sort():[e]),fr(r)}}(t):(t instanceof IDBTransaction&&function WU(t){if(ap.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ap.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function jU(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,cp):t)}function fr(t){if(t instanceof IDBRequest)return function GU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(fr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Gb.set(n,t)}).catch(()=>{}),up.set(e,t),e}(t);if(lp.has(t))return lp.get(t);const e=KU(t);return e!==t&&(lp.set(t,e),up.set(e,t)),e}const dp=t=>up.get(t),QU=["get","getKey","getAll","getAllKeys","count"],JU=["put","add","delete","clear"],fp=new Map;function zb(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(fp.get(e))return fp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=JU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!QU.includes(n))return;const o=function(){var s=_(function*(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(yield Promise.all([c[n](...l),i&&u.done]))[0]});return function(l){return s.apply(this,arguments)}}();return fp.set(e,o),o}!function zU(t){cp=t(cp)}(t=>({...t,get:(e,n,r)=>zb(e,n)||t.get(e,n,r),has:(e,n)=>!!zb(e,n)||t.has(e,n)}));class XU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function ZU(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const hp="@firebase/app",ni=new sp("@firebase/app"),vu="[DEFAULT]",bH={[hp]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ri=new Map,Eu=new Map;function TH(t,e){try{t.container.addComponent(e)}catch(n){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ao(t){const e=t.name;if(Eu.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;Eu.set(e,t);for(const n of ri.values())TH(n,t);return!0}function Du(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Gn=new ws("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class AH{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const Ms="9.17.1";function Kb(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:vu,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var t;return null===(t=pu())||void 0===t?void 0:t.config})()),!n)throw Gn.create("no-options");const o=ri.get(i);if(o){if(_u(n,o.options)&&_u(r,o.config))return o;throw Gn.create("duplicate-app",{appName:i})}const s=new LU(i);for(const l of Eu.values())s.addComponent(l);const a=new AH(n,r,s);return ri.set(i,a),a}function Yb(t=vu){const e=ri.get(t);if(!e&&t===vu)return Kb();if(!e)throw Gn.create("no-app",{appName:t});return e}function hr(t,e,n){var r;let i=null!==(r=bH[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ni.warn(a.join(" "))}ao(new ei(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ns="firebase-heartbeat-store";let gp=null;function Qb(){return gp||(gp=function YU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=fr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(fr(s.result),l.oldVersion,l.newVersion,fr(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ns)}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),gp}function mp(){return(mp=_(function*(t){try{return(yield Qb()).transaction(Ns).objectStore(Ns).get(Xb(t))}catch(e){if(e instanceof dr)ni.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e?.message});ni.warn(n.message)}}})).apply(this,arguments)}function Jb(t,e){return _p.apply(this,arguments)}function _p(){return(_p=_(function*(t,e){try{const r=(yield Qb()).transaction(Ns,"readwrite");return yield r.objectStore(Ns).put(e,Xb(t)),r.done}catch(n){if(n instanceof dr)ni.warn(n.message);else{const r=Gn.create("idb-set",{originalErrorMessage:n?.message});ni.warn(r.message)}}})).apply(this,arguments)}function Xb(t){return`${t.name}!${t.options.appId}`}class OH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return _(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zb();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(o=>o.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return _(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=Zb(),{heartbeatsToSend:r,unsentEntries:i}=function kH(t,e=1024){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),eT(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=fu(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function Zb(){return(new Date).toISOString().substring(0,10)}class FH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(function*(){return!!function _U(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function yU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){e(n)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return _(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function PH(t){return mp.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Jb(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return _(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Jb(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function eT(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}!function LH(t){ao(new ei("platform-logger",e=>new XU(e),"PRIVATE")),ao(new ei("heartbeat",e=>new OH(e),"PRIVATE")),hr(hp,"0.9.3",t),hr(hp,"0.9.3","esm2017"),hr("fire-js","")}("");const VH=function tT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nT=new ws("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),rT=new sp("@firebase/auth");function Cu(t,...e){rT.logLevel<=re.ERROR&&rT.error(`Auth (${Ms}): ${t}`,...e)}function yt(t,...e){throw yp(t,...e)}function vn(t,...e){return yp(t,...e)}function iT(t,e,n){const r=Object.assign(Object.assign({},VH()),{[e]:n});return new ws("auth","Firebase",r).create(e,{appName:t.name})}function yp(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nT.create(t,...e)}function I(t,e,...n){if(!t)throw yp(e,...n)}function En(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function pr(t,e){t||En(e)}const oT=new Map;function Wn(t){pr(t instanceof Function,"Expected a class definition");let e=oT.get(t);return e?(pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oT.set(t,e),e)}function Ps(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function sT(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}function HH(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function vp(){return"http:"===sT()||"https:"===sT()}()||function gU(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||"connection"in navigator))||navigator.onLine}class Rs{constructor(e,n){this.shortDelay=e,this.longDelay=n,pr(n>e,"Short delay should be less than long delay!"),this.isMobile=np()||Bb()}get(){return HH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ep(t,e){pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class aT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},GH=new Rs(3e4,6e4);function Fe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ue(t,e,n,r){return Dp.apply(this,arguments)}function Dp(){return(Dp=_(function*(t,e,n,r,i={}){return lT(t,i,_(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=Ts(Object.assign({key:t.config.apiKey},s)).slice(1),l=yield t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),aT.fetch()(uT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function lT(t,e,n){return Cp.apply(this,arguments)}function Cp(){return(Cp=_(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$H),e);try{const i=new WH(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw xs(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw xs(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===l)throw xs(t,"email-already-in-use",s);if("USER_DISABLED"===l)throw xs(t,"user-disabled",s);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw iT(t,c,u);yt(t,c)}}catch(i){if(i instanceof dr)throw i;yt(t,"network-request-failed")}})).apply(this,arguments)}function zn(t,e,n,r){return Ip.apply(this,arguments)}function Ip(){return(Ip=_(function*(t,e,n,r,i={}){const o=yield Ue(t,e,n,r,i);return"mfaPendingCredential"in o&&yt(t,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function uT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Ep(t.config,i):`${t.config.apiScheme}://${i}`}class WH{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),GH.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xs(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=vn(t,e,r);return i.customData._tokenResponse=n,i}function wp(){return(wp=_(function*(t,e){return Ue(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function KH(t,e){return Tp.apply(this,arguments)}function Tp(){return(Tp=_(function*(t,e){return Ue(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Os(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sp(){return(Sp=_(function*(t,e=!1){const n=_t(t),r=yield n.getIdToken(e),i=Iu(r);I(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Os(Ap(i.auth_time)),issuedAtTime:Os(Ap(i.iat)),expirationTime:Os(Ap(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function Ap(t){return 1e3*Number(t)}function Iu(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const i=hu(n);return i?JSON.parse(i):(Cu("Failed to decode base64 JWT payload"),null)}catch(i){return Cu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qn(t,e){return Mp.apply(this,arguments)}function Mp(){return(Mp=_(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof dr&&JH(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function JH({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class XH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(_(function*(){yield n.iteration()}),r)}iteration(){var e=this;return _(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class cT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Os(this.lastLoginAt),this.creationTime=Os(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ks(t){return Np.apply(this,arguments)}function Np(){return(Np=_(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield qn(t,KH(n,{idToken:r}));I(i?.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?t2(o.providerUserInfo):[],a=e2(t.providerData,s),c=!!t.isAnonymous&&!(t.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cT(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,d)})).apply(this,arguments)}function Pp(){return(Pp=_(function*(t){const e=_t(t);yield ks(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function e2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function t2(t){return t.map(e=>{var{providerId:n}=e,r=B_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Rp(){return(Rp=_(function*(t,e){const n=yield lT(t,{},_(function*(){const r=Ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=uT(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aT.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Fs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(typeof e.idToken<"u","internal-error"),I(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function QH(t){const e=Iu(t);return I(e,"internal-error"),I(typeof e.exp<"u","internal-error"),I(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return _(function*(){return I(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return _(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function n2(t,e){return Rp.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Fs;return r&&(I("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(I("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(I("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fs,this.toJSON())}_performRefresh(){return En("not implemented")}}function gr(t,e){I("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class ii{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=B_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cT(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var n=this;return _(function*(){const r=yield qn(n,n.stsTokenManager.getToken(n.auth,e));return I(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function YH(t){return Sp.apply(this,arguments)}(this,e)}reload(){return function ZH(t){return Pp.apply(this,arguments)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return _(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield ks(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return _(function*(){const n=yield e.getIdToken();return yield qn(e,function zH(t,e){return wp.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,c;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,m=null!==(l=n._redirectEventId)&&void 0!==l?l:void 0,v=null!==(u=n.createdAt)&&void 0!==u?u:void 0,w=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:A,isAnonymous:te,providerData:pe,stsTokenManager:S_}=n;I(y&&S_,e,"internal-error");const E8=Fs.fromJSON(this.name,S_);I("string"==typeof y,e,"internal-error"),gr(d,e.name),gr(f,e.name),I("boolean"==typeof A,e,"internal-error"),I("boolean"==typeof te,e,"internal-error"),gr(h,e.name),gr(p,e.name),gr(g,e.name),gr(m,e.name),gr(v,e.name),gr(w,e.name);const A_=new ii({uid:y,auth:e,email:f,emailVerified:A,displayName:d,isAnonymous:te,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:E8,createdAt:v,lastLoginAt:w});return pe&&Array.isArray(pe)&&(A_.providerData=pe.map(D8=>Object.assign({},D8))),m&&(A_._redirectEventId=m),A_}static _fromIdTokenResponse(e,n,r=!1){return _(function*(){const i=new Fs;i.updateFromServerResponse(n);const o=new ii({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ks(o),o})()}}const dT=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(function*(){return!0})()}_set(n,r){var i=this;return _(function*(){i.storage[n]=r})()}_get(n){var r=this;return _(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return _(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function wu(t,e,n){return`firebase:${t}:${e}:${n}`}class uo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=wu(this.userKey,i.apiKey,o),this.fullPersistenceKey=wu("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return _(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?ii._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return _(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(function*(){if(!n.length)return new uo(Wn(dT),e,r);const i=(yield Promise.all(n.map(function(){var u=_(function*(c){if(yield c._isAvailable())return c});return function(c){return u.apply(this,arguments)}}()))).filter(u=>u);let o=i[0]||Wn(dT);const s=wu(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=yield u._get(s);if(c){const d=ii._fromJSON(e,c);u!==o&&(a=d),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return o._shouldAllowMigration&&l.length?(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(function(){var u=_(function*(c){if(c!==o)try{yield c._remove(s)}catch{}});return function(c){return u.apply(this,arguments)}}())),new uo(o,e,r)):new uo(o,e,r)})()}}function fT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_T(e))return"Blackberry";if(yT(e))return"Webos";if(xp(e))return"Safari";if((e.includes("chrome/")||pT(e))&&!e.includes("edge/"))return"Chrome";if(mT(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function hT(t=Be()){return/firefox\//i.test(t)}function xp(t=Be()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pT(t=Be()){return/crios\//i.test(t)}function gT(t=Be()){return/iemobile/i.test(t)}function mT(t=Be()){return/android/i.test(t)}function _T(t=Be()){return/blackberry/i.test(t)}function yT(t=Be()){return/webos/i.test(t)}function bu(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vT(t=Be()){return bu(t)||mT(t)||yT(t)||_T(t)||/windows phone/i.test(t)||gT(t)}function ET(t,e=[]){let n;switch(t){case"Browser":n=fT(Be());break;case"Worker":n=`${fT(Be())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ms}/${r}`}class s2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return _(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class a2{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DT(this),this.idTokenSubscription=new DT(this),this.beforeStateQueue=new s2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Wn(n)),this._initializationPromise=this.queue(_(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield uo.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return _(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return _(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,l=o?._redirectEventId,u=yield n.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return I(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var n=this;return _(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return _(function*(){try{yield ks(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function jH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return _(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return _(function*(){const r=e?_t(e):null;return r&&I(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return _(function*(){if(!r._deleted)return e&&I(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(_(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return _(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(_(function*(){yield n.assertedPersistence.setPersistence(Wn(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ws("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return _(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return _(function*(){if(!n.redirectPersistenceManager){const r=e&&Wn(e)||n._popupRedirectResolver;I(r,n,"argument-error"),n.redirectPersistenceManager=yield uo.create(n,[Wn(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return _(function*(){var r,i;return n._isInitialized&&(yield n.queue(_(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return _(function*(){if(e===n.currentUser)return n.queue(_(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return _(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ET(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return _(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function vt(t){return _t(t)}class DT{constructor(e){this.auth=e,this.observer=null,this.addObserver=function bU(t,e){const n=new TU(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function CT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class wT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return En("not implemented")}_getIdTokenResponse(e){return En("not implemented")}_linkToIdToken(e,n){return En("not implemented")}_getReauthenticationResolver(e){return En("not implemented")}}function kp(){return(kp=_(function*(t,e){return Ue(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Lp(){return(Lp=_(function*(t,e){return zn(t,"POST","/v1/accounts:signInWithPassword",Fe(t,e))})).apply(this,arguments)}function $p(){return($p=_(function*(t,e){return zn(t,"POST","/v1/accounts:signInWithEmailLink",Fe(t,e))})).apply(this,arguments)}function Gp(){return(Gp=_(function*(t,e){return zn(t,"POST","/v1/accounts:signInWithEmailLink",Fe(t,e))})).apply(this,arguments)}class Ls extends wT{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ls(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ls(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){var n=this;return _(function*(){switch(n.signInMethod){case"password":return function f2(t,e){return Lp.apply(this,arguments)}(e,{returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function _2(t,e){return $p.apply(this,arguments)}(e,{email:n._email,oobCode:n._password});default:yt(e,"internal-error")}})()}_linkToIdToken(e,n){var r=this;return _(function*(){switch(r.signInMethod){case"password":return function TT(t,e){return kp.apply(this,arguments)}(e,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function y2(t,e){return Gp.apply(this,arguments)}(e,{idToken:n,email:r._email,oobCode:r._password});default:yt(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Kn(t,e){return Wp.apply(this,arguments)}function Wp(){return(Wp=_(function*(t,e){return zn(t,"POST","/v1/accounts:signInWithIdp",Fe(t,e))})).apply(this,arguments)}class Us{constructor(e){var n,r,i,o,s,a;const l=Ss(As(e)),u=null!==(n=l.apiKey)&&void 0!==n?n:null,c=null!==(r=l.oobCode)&&void 0!==r?r:null,d=function b2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=l.mode)&&void 0!==i?i:null);I(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=l.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const n=function T2(t){const e=Ss(As(t)).link,n=e?Ss(As(e)).deep_link_id:null,r=Ss(As(t)).deep_link_id;return(r?Ss(As(r)).link:null)||r||n||e||t}(e);try{return new Us(n)}catch{return null}}}let ST=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ls._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=Us.parseLink(r);return I(i,"argument-error"),Ls._fromEmailAndCode(n,i.code,i.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class mr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class S2 extends mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function AT(t,e){return Jp.apply(this,arguments)}function Jp(){return(Jp=_(function*(t,e){return zn(t,"POST","/v1/accounts:signUp",Fe(t,e))})).apply(this,arguments)}class Ht{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(function*(){const o=yield ii._fromIdTokenResponse(e,r,i),s=MT(r);return new Ht({user:o,providerId:s,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return _(function*(){yield e._updateTokensIfNecessary(r,!0);const i=MT(r);return new Ht({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function MT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Au extends dr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Au(e,n,r,i)}}function NT(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Au._fromErrorAndOperation(t,o,e,r):o})}function eg(t,e){return tg.apply(this,arguments)}function tg(){return(tg=_(function*(t,e,n=!1){const r=yield qn(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Ht._forOperation(t,"link",r)})).apply(this,arguments)}function rg(){return(rg=_(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const o=yield qn(t,NT(r,i,e,t),n);I(o.idToken,r,"internal-error");const s=Iu(o.idToken);I(s,r,"internal-error");const{sub:a}=s;return I(t.uid===a,r,"user-mismatch"),Ht._forOperation(t,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&yt(r,"user-mismatch"),o}})).apply(this,arguments)}function xT(t,e){return ig.apply(this,arguments)}function ig(){return(ig=_(function*(t,e,n=!1){const r="signIn",i=yield NT(t,r,e),o=yield Ht._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})).apply(this,arguments)}function sg(){return(sg=_(function*(t,e){return xT(vt(t),e)})).apply(this,arguments)}function yg(){return(yg=_(function*(t,e,n){const r=vt(t),i=yield AT(r,{returnSecureToken:!0,email:e,password:n}),o=yield Ht._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(o.user),o})).apply(this,arguments)}const Pu="__sak";class kT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const X2=(()=>{class t extends kT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Y2(){const t=Be();return xp(t)||bu(t)}()&&function o2(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function i2(){return function mU(){const t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return _(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return _(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return _(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),FT=(()=>{class t extends kT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let ej=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return _(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,l=r.handlersMap[s];if(!l?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(l).map(function(){var d=_(function*(f){return f(i.origin,a)});return function(f){return d.apply(this,arguments)}}()),c=yield function Z2(t){return Promise.all(t.map(function(){var e=_(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:c})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function xg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return _(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const c=xg("",20);o.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:c,data:n},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function Le(){return window}function Og(){return typeof Le().WorkerGlobalScope<"u"&&"function"==typeof Le().importScripts}function kg(){return(kg=_(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const LT="firebaseLocalStorageDb",Ru="firebaseLocalStorage",VT="fbase_key";class js{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xu(t,e){return t.transaction([Ru],e?"readwrite":"readonly").objectStore(Ru)}function Fg(){const t=indexedDB.open(LT,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ru,{keyPath:VT})}catch(i){n(i)}}),t.addEventListener("success",_(function*(){const r=t.result;r.objectStoreNames.contains(Ru)?e(r):(r.close(),yield function aj(){const t=indexedDB.deleteDatabase(LT);return new js(t).toPromise()}(),e(yield Fg()))}))})}function BT(t,e,n){return Lg.apply(this,arguments)}function Lg(){return(Lg=_(function*(t,e,n){const r=xu(t,!0).put({[VT]:e,value:n});return new js(r).toPromise()})).apply(this,arguments)}function Vg(){return(Vg=_(function*(t,e){const n=xu(t,!1).get(e),r=yield new js(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function UT(t,e){const n=xu(t,!0).delete(e);return new js(n).toPromise()}const dj=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return _(function*(){return n.db||(n.db=yield Fg()),n.db})()}_withRetries(n){var r=this;return _(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return _(function*(){return Og()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return _(function*(){n.receiver=ej._getInstance(function oj(){return Og()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=_(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=_(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return _(function*(){var r,i;if(n.activeServiceWorker=yield function rj(){return kg.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new tj(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return _(function*(){if(r.sender&&r.activeServiceWorker&&function ij(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return _(function*(){try{if(!indexedDB)return!1;const n=yield Fg();return yield BT(n,Pu,"1"),yield UT(n,Pu),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return _(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return _(function*(){return i._withPendingWrite(_(function*(){return yield i._withRetries(o=>BT(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return _(function*(){const i=yield r._withRetries(o=>function lj(t,e){return Vg.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return _(function*(){return r._withPendingWrite(_(function*(){return yield r._withRetries(i=>UT(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return _(function*(){const r=yield n._withRetries(s=>{const a=xu(s,!1).getAll();return new js(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(_(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function jT(t){return`__${t}${Math.floor(1e6*Math.random())}`}function si(t,e){return e?Wn(e):(I(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}jT("rcb"),new Rs(3e4,6e4);class Kg extends wT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kn(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Kn(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Kn(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Aj(t){return xT(t.auth,new Kg(t),t.bypassAuthState)}function Mj(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),function RT(t,e){return rg.apply(this,arguments)}(n,new Kg(t),t.bypassAuthState)}function Nj(t){return Yg.apply(this,arguments)}function Yg(){return(Yg=_(function*(t){const{auth:e,user:n}=t;return I(n,e,"internal-error"),eg(n,new Kg(t),t.bypassAuthState)})).apply(this,arguments)}class Pj{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=_(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return _(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:l}=e;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(l)(u))}catch(c){n.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Aj;case"linkViaPopup":case"linkViaRedirect":return Nj;case"reauthViaPopup":case"reauthViaRedirect":return Mj;default:yt(this.auth,"internal-error")}}resolve(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Rs(2e3,1e4);const $s=new Map;class xj extends Pj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return _(function*(){let r=$s.get(n.auth._key());if(!r){try{const o=(yield function Oj(t,e){return em.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}$s.set(n.auth._key(),r)}return n.bypassAuthState||$s.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return _(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return _(function*(){})()}cleanUp(){}}function em(){return(em=_(function*(t,e){const n=WT(e),r=GT(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function kj(t,e){$s.set(t._key(),e)}function GT(t){return Wn(t._redirectPersistence)}function WT(t){return wu("pendingRedirect",t.config.apiKey,t.name)}function zT(t,e){return am.apply(this,arguments)}function am(){return(am=_(function*(t,e,n=!1){const r=vt(t),i=si(r,e),s=yield new xj(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class Uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Hj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YT(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YT(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YT({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function jj(t){return um.apply(this,arguments)}function um(){return(um=_(function*(t,e={}){return Ue(t,"GET","/v1/projects",e)})).apply(this,arguments)}const $j=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gj=/^https?/;function cm(){return(cm=_(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield jj(t);for(const n of e)try{if(zj(n))return}catch{}yt(t,"unauthorized-domain")})).apply(this,arguments)}function zj(t){const e=Ps(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return""===s.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Gj.test(n))return!1;if($j.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const qj=new Rs(3e4,6e4);function QT(){const t=Le().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let ku=null;function Yj(t){return ku=ku||function Kj(t){return new Promise((e,n)=>{var r,i,o;function s(){QT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QT(),n(vn(t,"network-request-failed"))},timeout:qj.get()})}if(null!==(i=null===(r=Le().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=Le().gapi)||void 0===o||!o.load){const a=jT("iframefcb");return Le()[a]=()=>{gapi.load?s():n(vn(t,"network-request-failed"))},function HT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=vn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function gj(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}s()}}).catch(e=>{throw ku=null,e})}(t),ku}const Qj=new Rs(5e3,15e3),Zj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t$(t){const e=t.config;I(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ep(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:Ms},i=e$.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ts(r).slice(1)}`}function dm(){return dm=_(function*(t){const e=yield Yj(t),n=Le().gapi;return I(n,t,"internal-error"),e.open({where:document.body,url:t$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zj,dontclear:!0},r=>new Promise(function(){var i=_(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=vn(t,"network-request-failed"),l=Le().setTimeout(()=>{s(a)},Qj.get());function u(){Le().clearTimeout(l),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),dm.apply(this,arguments)}const r$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class JT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XT(t,e,n,r,i,o){I(t.config.authDomain,t,"auth-domain-config-required"),I(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ms,eventId:i};if(e instanceof mr){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",rp(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(o||{}))s[l]=u}if(e instanceof S2){const l=e.getScopes().filter(u=>""!==u);l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function f$({config:t}){return t.emulator?Ep(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${Ts(a).slice(1)}`}const fm="webStorageSupport",p$=class h${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FT,this._completeRedirectFn=zT,this._overrideRedirectResult=kj}_openPopup(e,n,r,i){var o=this;return _(function*(){var s;pr(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=XT(e,n,r,Ps(),i);return function l$(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},r$),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Be().toLowerCase();n&&(a=pT(u)?"_blank":n),hT(u)&&(e=e||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(function r2(t=Be()){var e;return bu(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function u$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new JT(null);const d=window.open(e||"",a,c);I(d,t,"popup-blocked");try{d.focus()}catch{}return new JT(d)}(e,a,xg())})()}_openRedirect(e,n,r,i){var o=this;return _(function*(){return yield o._originValidation(e),function nj(t){Le().location.href=t}(XT(e,n,r,Ps(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(pr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return _(function*(){const r=yield function n$(t){return dm.apply(this,arguments)}(e),i=new Uj(e);return r.register("authEvent",o=>(I(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[fm];void 0!==s&&n(!!s),yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Wj(t){return cm.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vT()||xp()||bu()}};var eS="@firebase/auth";class g${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return _(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const v$=Vb("authIdTokenMaxAge")||300;let nS=null;const E$=t=>function(){var e=_(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>v$)return;const o=r?.token;nS!==o&&(nS=o,yield fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function D$(t=Yb()){const e=Du(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function BH(t,e){const n=Du(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(_u(n.getOptions(),e??{}))return i;yt(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:p$,persistence:[dj,X2,FT]}),r=Vb("authTokenSyncURL");if(r){const o=E$(r);(function G2(t,e,n){_t(t).beforeAuthStateChanged(e,n)})(n,o,()=>o(n.currentUser)),function $2(t,e,n,r){_t(t).onIdTokenChanged(e,n,r)}(n,s=>o(s))}const i=Lb("auth");return i&&function l2(t,e,n){const r=vt(t);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=CT(e),{host:s,port:a}=function u2(t){const e=CT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:IT(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:IT(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function c2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}!function _$(t){ao(new ei("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:o,authDomain:s}=r.options;return((a,l)=>{I(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),I(!s?.includes(":"),"argument-error",{appName:a.name});const u={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ET(t)},c=new a2(a,l,u);return function UH(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,n),c})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ao(new ei("auth-internal",e=>{const n=vt(e.getProvider("auth").getImmediate());return new g$(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),hr(eS,"0.21.3",function m$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),hr(eS,"0.21.3","esm2017")}("Browser");const rS="@firebase/database";let hm="";class I${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:bs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class w${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return $n(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const oS=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new I$(e)}}catch{}return new w$},ai=oS("localStorage"),pm=oS("sessionStorage"),co=new sp("@firebase/database"),sS=function(){let t=1;return function(){return t++}}(),aS=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,C(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new wU;n.update(e);const r=n.digest();return tp.encodeByteArray(r)},Gs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Gs.apply(null,r):e+="object"==typeof r?ke(r):r,e+=" "}return e};let li=null,lS=!0;const He=function(...t){if(!0===lS&&(lS=!1,null===li&&!0===pm.get("logging_enabled")&&function(t,e){C(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(co.logLevel=re.VERBOSE,li=co.log.bind(co),e&&pm.set("logging_enabled",!0)):"function"==typeof t?li=t:(li=null,pm.remove("logging_enabled"))}(!0)),li){const e=Gs.apply(null,t);li(e)}},Ws=function(t){return function(...e){He(t,...e)}},gm=function(...t){const e="FIREBASE INTERNAL ERROR: "+Gs(...t);co.error(e)},Dn=function(...t){const e=`FIREBASE FATAL ERROR: ${Gs(...t)}`;throw co.error(e),new Error(e)},nt=function(...t){const e="FIREBASE WARNING: "+Gs(...t);co.warn(e)},Fu=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_r="[MIN_NAME]",Yn="[MAX_NAME]",ui=function(t,e){if(t===e)return 0;if(t===_r||e===Yn)return-1;if(e===_r||t===Yn)return 1;{const n=fS(t),r=fS(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},S$=function(t,e){return t===e?0:t<e?-1:1},zs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ke(e))},mm=function(t){if("object"!=typeof t||null===t)return ke(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=ke(e[r]),n+=":",n+=mm(t[e[r]]);return n+="}",n},cS=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function je(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const dS=function(t){C(!Fu(t),"Invalid JSON number");const r=1023;let i,o,s,a,l;0===t?(o=0,s=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(t/Math.pow(2,-1074))));const u=[];for(l=52;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const c=u.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(c.substr(l,8),2).toString(16);1===f.length&&(f="0"+f),d+=f}return d.toLowerCase()},P$=new RegExp("^-?(0*)\\d{1,10}$"),fS=function(t){if(P$.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},fo=function(t){try{t()}catch(e){setTimeout(()=>{throw nt("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},qs=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class k${constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class F${constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(He("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nt(e)}}let Ks=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const _S=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ES="websocket",DS="long_polling";class ym{constructor(e,n,r,i,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ai.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ai.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function CS(t,e,n){let r;if(C("string"==typeof e,"typeof type must == string"),C("object"==typeof n,"typeof params must == object"),e===ES)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==DS)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function L$(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return je(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class V${constructor(){this.counters_={}}incrementCounter(e,n=1){$n(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return oU(this.counters_)}}const vm={},Em={};function Dm(t){const e=t.toString();return vm[e]||(vm[e]=new V$),vm[e]}class U${constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fo(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yr{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ws(e),this.stats_=Dm(n),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),CS(n,DS,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new U$(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cm((...o)=>{const[s,a,l,u,c]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_S.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yr.forceAllow_=!0}static forceDisallow(){yr.forceDisallow_=!0}static isAvailable(){return!(!yr.forceAllow_&&(yr.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=kb(n),i=cS(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Cm{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Cm.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){He("frame writing exception"),a.stack&&He(a.stack),He(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||He("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{He("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Vu=null;typeof MozWebSocket<"u"?Vu=MozWebSocket:typeof WebSocket<"u"&&(Vu=WebSocket);let ho=(()=>{class t{constructor(n,r,i,o,s,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ws(this.connId),this.stats_=Dm(r),this.connURL=t.connectionURL_(r,a,l,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&_S.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),CS(n,ES,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ai.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Vu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Vu&&!t.forceDisallow_}static previouslyFailed(){return ai.isInMemoryStorage||!0===ai.get("previous_websocket_failure")}markConnectionHealthy(){ai.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=bs(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(C(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=ke(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cS(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),MS=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[yr,ho]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=ho&&ho.isAvailable();let i=r&&!ho.previouslyFailed();if(n.webSocketOnly&&(r||nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ho];else{const o=this.transports_=[];for(const s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class FS{constructor(e,n,r,i,o,s,a,l,u,c){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ws("c:"+this.id+":"),this.transportManager_=new MS(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=qs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=zs("t",e),r=zs("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=zs("t",e),r=zs("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=zs("t",e);if("d"in e){const r=e.d;if("h"===n){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?gm("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):gm("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ai.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LS{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class VS{constructor(e){this.allowedEvents_=e,this.listeners_={},C(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){C(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Bu extends VS{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!np()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Bu}getInitialEvent(e){return C("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ee{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function Y(){return new ee("")}function $(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vr(t){return t.pieces_.length-t.pieceNum_}function oe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ee(t.pieces_,e)}function wm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ys(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function HS(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ee(e,0)}function _e(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ee)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ee(n,0)}function G(t){return t.pieceNum_>=t.pieces_.length}function ft(t,e){const n=$(t),r=$(e);if(null===n)return e;if(n===r)return ft(oe(t),oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function bm(t,e){if(vr(t)!==vr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function jt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(vr(t)>vr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class uG{constructor(e,n){this.errorPrefix_=n,this.parts_=Ys(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=yu(this.parts_[r]);jS(this)}}function jS(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ci(t))}function ci(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Tm extends VS{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tm}getInitialEvent(e){return C("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Qs=1e3;let Hu,di=(()=>{class t extends LS{constructor(n,r,i,o,s,a,l,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Ws("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Qs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tm.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Bu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(ke(s)),C(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new Is,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),C(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,l=>{const u=l.d,c=l.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",l),"ok"!==c&&this.removeListen_(i,o),n.onComplete&&n.onComplete(c,u))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&$n(n,"w")){const i=oo(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=gu(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=gu(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),C(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ke(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):gm("Unrecognized action received from server: "+ke(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){C(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return _(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let l=!1,u=null;const c=function(){u?u.close():(l=!0,o())};n.realtime_={close:c,sendRequest:function(h){C(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(h)}};const f=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[h,p]=yield Promise.all([n.authTokenProvider_.getToken(f),n.appCheckTokenProvider_.getToken(f)]);l?He("getToken() completed but was canceled"):(He("getToken() completed. Creating connection."),n.authToken_=h&&h.accessToken,n.appCheckToken_=p&&p.token,u=new FS(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,g=>{nt(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(h){n.log_("Failed to get token: "+h),l||(n.repoInfo_.nodeAdmin&&nt(h),c())}}})()}interrupt(n){He("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){He("Resuming connection for reason: "+n),delete this.interruptReasons_[n],rp(this.interruptReasons_)&&(this.reconnectDelay_=Qs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>mm(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new ee(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){He("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){He("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+hm.replace(/\./g,"-")]=1,np()?n["framework.cordova"]=1:Bb()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Bu.getInstance().currentlyOnline();return rp(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class W{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new W(e,n)}}class Uu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new W(_r,e),i=new W(_r,n);return 0!==this.compare(r,i)}minPost(){return W.MIN}}class WS extends Uu{static get __EMPTY_NODE(){return Hu}static set __EMPTY_NODE(e){Hu=e}compare(e,n){return ui(e.name,n.name)}isDefinedOn(e){throw io("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(Yn,Hu)}makePost(e,n){return C("string"==typeof e,"KeyIndex indexValue must always be a string."),new W(e,Hu)}toString(){return".key"}}const Cn=new WS;class ju{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Am,nn=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??Et.EMPTY_NODE,this.right=s??Et.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Et.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Et.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Et{constructor(e,n=Et.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Et(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new Et(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ju(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ju(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ju(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ju(this.root_,null,this.comparator_,!0,e)}}function _G(t,e){return ui(t.name,e.name)}function Sm(t,e){return ui(t,e)}Et.EMPTY_NODE=new class mG{copy(e,n,r,i,o){return this}insert(e,n,r){return new nn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zS=function(t){return"number"==typeof t?"number:"+dS(t):"string:"+t},qS=function(t){if(t.isLeafNode()){const e=t.val();C("string"==typeof e||"number"==typeof e||"object"==typeof e&&$n(e,".sv"),"Priority must be a string or number.")}else C(t===Am||t.isEmpty(),"priority of unexpected type.");C(t===Am||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KS,YS,QS,po=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,C(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qS(this.priorityNode_)}static set __childrenNodeConstructor(n){KS=n}static get __childrenNodeConstructor(){return KS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return G(n)?this:".priority"===$(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=$(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(C(".priority"!==i||1===vr(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(oe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+zS(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?dS(this.value_):this.value_,this.lazyHash_=aS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(C(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return C(o>=0,"Unknown leaf type: "+r),C(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const de=new class DG extends Uu{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?ui(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(Yn,new po("[PRIORITY-POST]",QS))}makePost(e,n){const r=YS(e);return new W(n,new po("[PRIORITY-POST]",r))}toString(){return".priority"}},CG=Math.log(2);class IG{constructor(e){this.count=parseInt(Math.log(e+1)/CG,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $u=function(t,e,n,r){t.sort(e);const i=function(l,u){const c=u-l;let d,f;if(0===c)return null;if(1===c)return d=t[l],f=n?n(d):d,new nn(f,d.node,nn.BLACK,null,null);{const h=parseInt(c/2,10)+l,p=i(l,h),g=i(h+1,u);return d=t[h],f=n?n(d):d,new nn(f,d.node,nn.BLACK,p,g)}},a=function(l){let u=null,c=null,d=t.length;const f=function(p,g){const m=d-p,v=d;d-=p;const w=i(m+1,v),y=t[m],A=n?n(y):y;h(new nn(A,y.node,g,null,w))},h=function(p){u?(u.left=p,u=p):(c=p,u=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),m=Math.pow(2,l.count-(p+1));g?f(m,nn.BLACK):(f(m,nn.BLACK),f(m,nn.RED))}return c}(new IG(t.length));return new Et(r||e,a)};let Mm;const go={};class Qn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return C(go&&de,"ChildrenNode.ts has not been loaded"),Mm=Mm||new Qn({".priority":go},{".priority":de}),Mm}get(e){const n=oo(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Et?n:null}hasIndex(e){return $n(this.indexSet_,e.toString())}addIndex(e,n){C(e!==Cn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(W.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?$u(r,e.getCompare()):go;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const c=Object.assign({},this.indexes_);return c[l]=a,new Qn(c,u)}addToIndexes(e,n){const r=mu(this.indexes_,(i,o)=>{const s=oo(this.indexSet_,o);if(C(s,"Missing index implementation for "+o),i===go){if(s.isDefinedOn(e.node)){const a=[],l=n.getIterator(W.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),$u(a,s.getCompare())}return go}{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new W(e.name,a))),l.insert(e,e.node)}});return new Qn(r,this.indexSet_)}removeFromIndexes(e,n){const r=mu(this.indexes_,i=>{if(i===go)return i;{const o=n.get(e.name);return o?i.remove(new W(e.name,o)):i}});return new Qn(r,this.indexSet_)}}let Js,V=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qS(this.priorityNode_),this.children_.isEmpty()&&C(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Js||(Js=new t(new Et(Sm),null,Qn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Js}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Js:r}}getChild(n){const r=$(n);return null===r?this:this.getImmediateChild(r).getChild(oe(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(C(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new W(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?Js:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){const i=$(n);if(null===i)return r;{C(".priority"!==$(n)||1===vr(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(oe(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(de,(a,l)=>{r[a]=l.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+zS(this.getPriority().val())+":"),this.forEachChild(de,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":aS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new W(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new W(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new W(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,W.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,W.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Xs?-1:0}withIndex(n){if(n===Cn||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Cn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(de),o=r.getIterator(de);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===Cn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Xs=new class wG extends V{constructor(){super(new Et(Sm),V.EMPTY_NODE,Qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return V.EMPTY_NODE}isEmpty(){return!1}};function De(t,e=null){if(null===t)return V.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),C(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new po(t,De(e));if(t instanceof Array){let n=V.EMPTY_NODE;return je(t,(r,i)=>{if($n(t,r)&&"."!==r.substring(0,1)){const o=De(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(De(e))}{const n=[];let r=!1;if(je(t,(s,a)=>{if("."!==s.substring(0,1)){const l=De(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new W(s,l)))}}),0===n.length)return V.EMPTY_NODE;const o=$u(n,_G,s=>s.name,Sm);if(r){const s=$u(n,de.getCompare());return new V(o,De(e),new Qn({".priority":s},{".priority":de}))}return new V(o,De(e),Qn.Default)}}Object.defineProperties(W,{MIN:{value:new W(_r,V.EMPTY_NODE)},MAX:{value:new W(Yn,Xs)}}),WS.__EMPTY_NODE=V.EMPTY_NODE,po.__childrenNodeConstructor=V,function yG(t){Am=t}(Xs),function EG(t){QS=t}(Xs),function vG(t){YS=t}(De);class Nm extends Uu{constructor(e){super(),this.indexPath_=e,C(!G(e)&&".priority"!==$(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?ui(e.name,n.name):o}makePost(e,n){const r=De(e),i=V.EMPTY_NODE.updateChild(this.indexPath_,r);return new W(n,i)}maxPost(){const e=V.EMPTY_NODE.updateChild(this.indexPath_,Xs);return new W(Yn,e)}toString(){return Ys(this.indexPath_,0).join("/")}}const Pm=new class TG extends Uu{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?ui(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){const r=De(e);return new W(n,r)}toString(){return".value"}};function JS(t){return{type:"value",snapshotNode:t}}function mo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Zs(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ea(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class Rm{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){C(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Zs(n,a)):C(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(mo(n,r)):s.trackChildChange(ea(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return null!=r&&(e.isLeafNode()||e.forEachChild(de,(i,o)=>{n.hasChild(i)||r.trackChildChange(Zs(i,o))}),n.isLeafNode()||n.forEachChild(de,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(ea(i,o,s))}else r.trackChildChange(mo(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?V.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ta{constructor(e){this.indexedFilter_=new Rm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ta.getStartPost_(e),this.endPost_=ta.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new W(n,r))||(r=V.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=V.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(V.EMPTY_NODE);const o=this;return n.forEachChild(de,(s,a)=>{o.matches(new W(s,a))||(i=i.updateImmediateChild(s,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class AG{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ta(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new W(n,r))||(r=V.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=V.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=V.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=n.withIndex(this.index_),i=i.updatePriority(V.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(f,h)=>d(h,f)}else s=this.index_.getCompare();const a=e;C(a.numChildren()===this.limit_,"");const l=new W(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(l);if(a.hasChild(n)){const d=a.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=f&&(f.name===n||a.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const h=null==f?1:s(f,l);if(c&&!r.isEmpty()&&h>=0)return o?.trackChildChange(ea(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Zs(n,d));const g=a.updateImmediateChild(n,V.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(o?.trackChildChange(mo(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}}return r.isEmpty()?e:c&&s(u,l)>=0?(null!=o&&(o.trackChildChange(Zs(u.name,u.node)),o.trackChildChange(mo(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,V.EMPTY_NODE)):e}}class xm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=de}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return C(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return C(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_r}hasEnd(){return this.endSet_}getIndexEndValue(){return C(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return C(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return C(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===de}copy(){const e=new xm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function XS(t){const e={};if(t.isDefault())return e;let n;if(t.index_===de?n="$priority":t.index_===Pm?n="$value":t.index_===Cn?n="$key":(C(t.index_ instanceof Nm,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ke(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ke(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ke(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ke(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ZS(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==de&&(e.i=t.index_.toString()),e}class Wu extends LS{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ws("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(C(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Wu.getListenId_(e,r),a={};this.listens_[s]=a;const l=XS(e._queryParams);this.restRequest_(o+".json",l,(u,c)=>{let d=c;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,r),oo(this.listens_,s)===a){let f;f=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(f,null)}})}unlisten(e,n){const r=Wu.getListenId_(e,n);delete this.listens_[r]}get(e){const n=XS(e._queryParams),r=e._path.toString(),i=new Is;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ts(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=bs(a.responseText)}catch{nt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&nt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class OG{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function zu(){return{value:null,children:new Map}}function _o(t,e,n){if(G(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=$(e);t.children.has(r)||t.children.set(r,zu()),_o(t.children.get(r),e=oe(e),n)}}function Lm(t,e,n){null!==t.value?n(e,t.value):function kG(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{Lm(i,new ee(e.toString()+"/"+r),n)})}class FG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&je(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class BG{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new FG(e);const r=1e4+2e4*Math.random();qs(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;je(e,(i,o)=>{o>0&&$n(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),qs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $t=(()=>{return(t=$t||($t={}))[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$t;var t})();function Um(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class qu{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=$t.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(G(this.path)){if(null!=this.affectedTree.value)return C(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ee(e));return new qu(Y(),n,this.revert)}}return C($(this.path)===e,"operationForChild called for unrelated child."),new qu(oe(this.path),this.affectedTree,this.revert)}}class na{constructor(e,n){this.source=e,this.path=n,this.type=$t.LISTEN_COMPLETE}operationForChild(e){return G(this.path)?new na(this.source,Y()):new na(this.source,oe(this.path))}}class fi{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=$t.OVERWRITE}operationForChild(e){return G(this.path)?new fi(this.source,Y(),this.snap.getImmediateChild(e)):new fi(this.source,oe(this.path),this.snap)}}class yo{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=$t.MERGE}operationForChild(e){if(G(this.path)){const n=this.children.subtree(new ee(e));return n.isEmpty()?null:n.value?new fi(this.source,Y(),n.value):new yo(this.source,Y(),n)}return C($(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new yo(this.source,oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Er{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(G(e))return this.isFullyInitialized()&&!this.filtered_;const n=$(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class UG{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ra(t,e,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,l)=>function $G(t,e,n){if(null==e.childName||null==n.childName)throw io("Should only compare child_ events.");const r=new W(e.childName,e.snapshotNode),i=new W(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,l)),s.forEach(a=>{const l=function jG(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Ku(t,e){return{eventCache:t,serverCache:e}}function ia(t,e,n,r){return Ku(new Er(e,n,r),t.serverCache)}function tA(t,e,n,r){return Ku(t.eventCache,new Er(e,n,r))}function Yu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function hi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Hm;class fe{constructor(e,n=(()=>(Hm||(Hm=new Et(S$)),Hm))()){this.value=e,this.children=n}static fromObject(e){let n=new fe(null);return je(e,(r,i)=>{n=n.set(new ee(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:Y(),value:this.value};if(G(e))return null;{const r=$(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(oe(e),n);return null!=o?{path:_e(new ee(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(G(e))return this;{const n=$(e),r=this.children.get(n);return null!==r?r.subtree(oe(e)):new fe(null)}}set(e,n){if(G(e))return new fe(n,this.children);{const r=$(e),o=(this.children.get(r)||new fe(null)).set(oe(e),n),s=this.children.insert(r,o);return new fe(this.value,s)}}remove(e){if(G(e))return this.children.isEmpty()?new fe(null):new fe(null,this.children);{const n=$(e),r=this.children.get(n);if(r){const i=r.remove(oe(e));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new fe(null):new fe(this.value,o)}return this}}get(e){if(G(e))return this.value;{const n=$(e),r=this.children.get(n);return r?r.get(oe(e)):null}}setTree(e,n){if(G(e))return n;{const r=$(e),o=(this.children.get(r)||new fe(null)).setTree(oe(e),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new fe(this.value,s)}}fold(e){return this.fold_(Y(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(_e(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Y(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(G(e))return null;{const o=$(e),s=this.children.get(o);return s?s.findOnPath_(oe(e),_e(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Y(),n)}foreachOnPath_(e,n,r){if(G(e))return this;{this.value&&r(n,this.value);const i=$(e),o=this.children.get(i);return o?o.foreachOnPath_(oe(e),_e(n,i),r):new fe(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(_e(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class rn{constructor(e){this.writeTree_=e}static empty(){return new rn(new fe(null))}}function oa(t,e,n){if(G(e))return new rn(new fe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=ft(i,e);return o=o.updateChild(s,n),new rn(t.writeTree_.set(i,o))}{const i=new fe(n),o=t.writeTree_.setTree(e,i);return new rn(o)}}}function jm(t,e,n){let r=t;return je(n,(i,o)=>{r=oa(r,_e(e,i),o)}),r}function nA(t,e){if(G(e))return rn.empty();{const n=t.writeTree_.setTree(e,new fe(null));return new rn(n)}}function $m(t,e){return null!=pi(t,e)}function pi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(ft(n.path,e)):null}function rA(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(de,(r,i)=>{e.push(new W(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new W(r,i.value))}),e}function Dr(t,e){if(G(e))return t;{const n=pi(t,e);return new rn(null!=n?new fe(n):t.writeTree_.subtree(e))}}function Gm(t){return t.writeTree_.isEmpty()}function vo(t,e){return iA(Y(),t.writeTree_,e)}function iA(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?(C(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=iA(_e(t,i),o,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(_e(t,".priority"),r)),n}}function Qu(t,e){return uA(e,t)}function YG(t,e){if(t.snap)return jt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&jt(_e(t.path,n),e))return!0;return!1}function JG(t){return t.visible}function oA(t,e,n){let r=rn.empty();for(let i=0;i<t.length;++i){const o=t[i];if(e(o)){const s=o.path;let a;if(o.snap)jt(n,s)?(a=ft(n,s),r=oa(r,a,o.snap)):jt(s,n)&&(a=ft(s,n),r=oa(r,Y(),o.snap.getChild(a)));else{if(!o.children)throw io("WriteRecord should have .snap or .children");if(jt(n,s))a=ft(n,s),r=jm(r,a,o.children);else if(jt(s,n))if(a=ft(s,n),G(a))r=jm(r,Y(),o.children);else{const l=oo(o.children,$(a));if(l){const u=l.getChild(oe(a));r=oa(r,Y(),u)}}}}}return r}function sA(t,e,n,r,i){if(r||i){const o=Dr(t.visibleWrites,e);return!i&&Gm(o)?n:i||null!=n||$m(o,Y())?vo(oA(t.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(jt(u.path,e)||jt(e,u.path))},e),n||V.EMPTY_NODE):null}{const o=pi(t.visibleWrites,e);if(null!=o)return o;{const s=Dr(t.visibleWrites,e);return Gm(s)?n:null!=n||$m(s,Y())?vo(s,n||V.EMPTY_NODE):null}}}function Ju(t,e,n,r){return sA(t.writeTree,t.treePath,e,n,r)}function Wm(t,e){return function XG(t,e,n){let r=V.EMPTY_NODE;const i=pi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(de,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=Dr(t.visibleWrites,e);return n.forEachChild(de,(s,a)=>{const l=vo(Dr(o,new ee(s)),a);r=r.updateImmediateChild(s,l)}),rA(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return rA(Dr(t.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(t.writeTree,t.treePath,e)}function aA(t,e,n,r){return function ZG(t,e,n,r,i){C(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=_e(e,n);if($m(t.visibleWrites,o))return null;{const s=Dr(t.visibleWrites,o);return Gm(s)?i.getChild(n):vo(s,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Xu(t,e){return function t3(t,e){return pi(t.visibleWrites,e)}(t.writeTree,_e(t.treePath,e))}function zm(t,e,n){return function e3(t,e,n,r){const i=_e(e,n),o=pi(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?vo(Dr(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function lA(t,e){return uA(_e(t.treePath,e),t.writeTree)}function uA(t,e){return{treePath:t,writeTree:e}}class o3{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;C("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),C(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,ea(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,Zs(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,mo(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw io("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,ea(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cA=new class s3{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class qm{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Er(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zm(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:hi(this.viewCache_),o=function i3(t,e,n,r,i,o){return function n3(t,e,n,r,i,o,s){let a;const l=Dr(t.visibleWrites,e),u=pi(l,Y());if(null!=u)a=u;else{if(null==n)return[];a=vo(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const c=[],d=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let h=f.getNext();for(;h&&c.length<i;)0!==d(h,r)&&c.push(h),h=f.getNext();return c}}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,i,n,1,r,e);return 0===o.length?null:o[0]}}function dA(t,e,n,r,i,o){const s=e.eventCache;if(null!=Xu(r,n))return e;{let a,l;if(G(n))if(C(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=hi(e),d=Wm(r,u instanceof V?u:V.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const u=Ju(r,hi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{const u=$(n);if(".priority"===u){C(1===vr(n),"Can't have a priority with additional path components");const c=s.getNode();l=e.serverCache.getNode();const d=aA(r,n,c,l);a=null!=d?t.filter.updatePriority(c,d):s.getNode()}else{const c=oe(n);let d;if(s.isCompleteForChild(u)){l=e.serverCache.getNode();const f=aA(r,n,s.getNode(),l);d=null!=f?s.getNode().getImmediateChild(u).updateChild(c,f):s.getNode().getImmediateChild(u)}else d=zm(r,u,e.serverCache);a=null!=d?t.filter.updateChild(s.getNode(),u,d,c,i,o):s.getNode()}}return ia(e,a,s.isFullyInitialized()||G(n),t.filter.filtersNodes())}}function Zu(t,e,n,r,i,o,s,a){const l=e.serverCache;let u;const c=s?t.filter:t.filter.getIndexedFilter();if(G(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const h=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),h,null)}else{const h=$(n);if(!l.isCompleteForPath(n)&&vr(n)>1)return e;const p=oe(n),m=l.getNode().getImmediateChild(h).updateChild(p,r);u=".priority"===h?c.updatePriority(l.getNode(),m):c.updateChild(l.getNode(),h,m,p,cA,null)}const d=tA(e,u,l.isFullyInitialized()||G(n),c.filtersNodes());return dA(t,d,n,i,new qm(i,d,o),a)}function Km(t,e,n,r,i,o,s){const a=e.eventCache;let l,u;const c=new qm(i,e,o);if(G(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),l=ia(e,u,!0,t.filter.filtersNodes());else{const d=$(n);if(".priority"===d)u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ia(e,u,a.isFullyInitialized(),a.isFiltered());else{const f=oe(n),h=a.getNode().getImmediateChild(d);let p;if(G(f))p=r;else{const g=c.getCompleteChild(d);p=null!=g?".priority"===wm(f)&&g.getChild(HS(f)).isEmpty()?g:g.updateChild(f,r):V.EMPTY_NODE}l=h.equals(p)?e:ia(e,t.filter.updateChild(a.getNode(),d,p,f,c,s),a.isFullyInitialized(),t.filter.filtersNodes())}}return l}function fA(t,e){return t.eventCache.isCompleteForChild(e)}function hA(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ym(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,l=e;u=G(n)?r:new fe(null).setTree(n,r);const c=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(c.hasChild(d)){const p=hA(0,e.serverCache.getNode().getImmediateChild(d),f);l=Zu(t,l,new ee(d),p,i,o,s,a)}}),u.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&null===f.value;if(!c.hasChild(d)&&!h){const g=hA(0,e.serverCache.getNode().getImmediateChild(d),f);l=Zu(t,l,new ee(d),g,i,o,s,a)}}),l}class g3{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Rm(r.getIndex()),o=function MG(t){return t.loadsAllData()?new Rm(t.getIndex()):t.hasLimit()?new AG(t):new ta(t)}(r);this.processor_=function a3(t){return{filter:t}}(o);const s=n.serverCache,a=n.eventCache,l=i.updateFullNode(V.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(V.EMPTY_NODE,a.getNode(),null),c=new Er(l,s.isFullyInitialized(),i.filtersNodes()),d=new Er(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ku(d,c),this.eventGenerator_=new UG(this.query_)}get query(){return this.query_}}function y3(t,e){const n=hi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!G(e)&&!n.getImmediateChild($(e)).isEmpty())?n.getChild(e):null}function pA(t){return 0===t.eventRegistrations_.length}function gA(t,e,n){const r=[];if(n){C(null==e,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){const s=t.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}else i.push(s)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function mA(t,e,n,r){e.type===$t.MERGE&&null!==e.source.queryId&&(C(hi(t.viewCache_),"We should always have a full cache before handling merges"),C(Yu(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,o=function u3(t,e,n,r,i){const o=new o3;let s,a;if(n.type===$t.OVERWRITE){const u=n;u.source.fromUser?s=Km(t,e,u.path,u.snap,r,i,o):(C(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!G(u.path),s=Zu(t,e,u.path,u.snap,r,i,a,o))}else if(n.type===$t.MERGE){const u=n;u.source.fromUser?s=function d3(t,e,n,r,i,o,s){let a=e;return r.foreach((l,u)=>{const c=_e(n,l);fA(e,$(c))&&(a=Km(t,a,c,u,i,o,s))}),r.foreach((l,u)=>{const c=_e(n,l);fA(e,$(c))||(a=Km(t,a,c,u,i,o,s))}),a}(t,e,u.path,u.children,r,i,o):(C(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=Ym(t,e,u.path,u.children,r,i,a,o))}else if(n.type===$t.ACK_USER_WRITE){const u=n;s=u.revert?function p3(t,e,n,r,i,o){let s;if(null!=Xu(r,n))return e;{const a=new qm(r,e,i),l=e.eventCache.getNode();let u;if(G(n)||".priority"===$(n)){let c;if(e.serverCache.isFullyInitialized())c=Ju(r,hi(e));else{const d=e.serverCache.getNode();C(d instanceof V,"serverChildren would be complete if leaf node"),c=Wm(r,d)}u=t.filter.updateFullNode(l,c,o)}else{const c=$(n);let d=zm(r,c,e.serverCache);null==d&&e.serverCache.isCompleteForChild(c)&&(d=l.getImmediateChild(c)),u=null!=d?t.filter.updateChild(l,c,d,oe(n),a,o):e.eventCache.getNode().hasChild(c)?t.filter.updateChild(l,c,V.EMPTY_NODE,oe(n),a,o):l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Ju(r,hi(e)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=Xu(r,Y()),ia(e,u,s,t.filter.filtersNodes())}}(t,e,u.path,r,i,o):function f3(t,e,n,r,i,o,s){if(null!=Xu(i,n))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(G(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Zu(t,e,n,l.getNode().getChild(n),i,o,a,s);if(G(n)){let u=new fe(null);return l.getNode().forEachChild(Cn,(c,d)=>{u=u.set(new ee(c),d)}),Ym(t,e,n,u,i,o,a,s)}return e}{let u=new fe(null);return r.foreach((c,d)=>{const f=_e(n,c);l.isCompleteForPath(f)&&(u=u.set(c,l.getNode().getChild(f)))}),Ym(t,e,n,u,i,o,a,s)}}(t,e,u.path,u.affectedTree,r,i,o)}else{if(n.type!==$t.LISTEN_COMPLETE)throw io("Unknown operation type: "+n.type);s=function h3(t,e,n,r,i){const o=e.serverCache;return dA(t,tA(e,o.getNode(),o.isFullyInitialized()||G(n),o.isFiltered()),n,r,cA,i)}(t,e,n.path,r,o)}const l=o.getChanges();return function c3(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Yu(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(JS(Yu(e)))}}(e,s,l),{viewCache:s,changes:l}}(t.processor_,i,e,n,r);return function l3(t,e){C(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),C(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,o.viewCache),C(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,_A(t,o.changes,o.viewCache.eventCache.getNode(),null)}function _A(t,e,n,r){return function HG(t,e,n,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function SG(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(s.childName,s.snapshotNode))}),ra(t,i,"child_removed",e,r,n),ra(t,i,"child_added",e,r,n),ra(t,i,"child_moved",o,r,n),ra(t,i,"child_changed",e,r,n),ra(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}let ec,nc;class yA{constructor(){this.views=new Map}}function Qm(t,e,n,r){const i=e.source.queryId;if(null!==i){const o=t.views.get(i);return C(null!=o,"SyncTree gave us an op for an invalid query."),mA(o,e,n,r)}{let o=[];for(const s of t.views.values())o=o.concat(mA(s,e,n,r));return o}}function vA(t,e,n,r,i){const s=t.views.get(e._queryIdentifier);if(!s){let a=Ju(n,i?r:null),l=!1;a?l=!0:r instanceof V?(a=Wm(n,r),l=!1):(a=V.EMPTY_NODE,l=!1);const u=Ku(new Er(a,l,!1),new Er(r,i,!1));return new g3(e,u)}return s}function EA(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Cr(t,e){let n=null;for(const r of t.views.values())n=n||y3(r,e);return n}function DA(t,e){return e._queryParams.loadsAllData()?tc(t):t.views.get(e._queryIdentifier)}function CA(t,e){return null!=DA(t,e)}function Ir(t){return null!=tc(t)}function tc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let A3=1;class IA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fe(null),this.pendingWriteTree_=function r3(){return{visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Jm(t,e,n,r,i){return function WG(t,e,n,r,i){C(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=oa(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Eo(t,new fi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function wr(t,e,n=!1){const r=function qG(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function KG(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);C(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){const a=t.allWrites[s];a.visible&&(s>=n&&YG(a,r.path)?i=!1:jt(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function QG(t){t.visibleWrites=oA(t.allWrites,JG,Y()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=nA(t.visibleWrites,r.path):je(r.children,l=>{t.visibleWrites=nA(t.visibleWrites,_e(r.path,l))}),!0))}(t.pendingWriteTree_,e)){let o=new fe(null);return null!=r.snap?o=o.set(Y(),!0):je(r.children,s=>{o=o.set(new ee(s),!0)}),Eo(t,new qu(r.path,o,n))}return[]}function sa(t,e,n){return Eo(t,new fi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function rc(t,e,n,r,i=!1){const o=e._path,s=t.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||CA(s,e))){const l=function b3(t,e,n,r){const i=e._queryIdentifier,o=[];let s=[];const a=Ir(t);if("default"===i)for(const[l,u]of t.views.entries())s=s.concat(gA(u,n,r)),pA(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||o.push(u.query));else{const l=t.views.get(i);l&&(s=s.concat(gA(l,n,r)),pA(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!Ir(t)&&o.push(new(function C3(){return C(ec,"Reference.ts has not been loaded"),ec}())(e._repo,e._path)),{removed:o,events:s}}(s,e,n,r);(function I3(t){return 0===t.views.size})(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const u=l.removed;if(a=l.events,!i){const c=-1!==u.findIndex(f=>f._queryParams.loadsAllData()),d=t.syncPointTree_.findOnPath(o,(f,h)=>Ir(h));if(c&&!d){const f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){const h=function k3(t){return t.fold((e,n,r)=>{if(n&&Ir(n))return[tc(n)];{let i=[];return n&&(i=EA(n)),je(r,(o,s)=>{i=i.concat(s)}),i}})}(f);for(let p=0;p<h.length;++p){const g=h[p],m=g.query,v=SA(t,g);t.listenProvider_.startListening(la(m),aa(t,m),v.hashFn,v.onComplete)}}}!d&&u.length>0&&!r&&(c?t.listenProvider_.stopListening(la(e),null):u.forEach(f=>{const h=t.queryToTagMap.get(oc(f));t.listenProvider_.stopListening(la(f),h)}))}!function F3(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=oc(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function wA(t,e,n,r){const i=Zm(t,r);if(null!=i){const o=e_(i),s=o.path,a=o.queryId,l=ft(s,e);return t_(t,s,new fi(Um(a),l,n))}return[]}function Xm(t,e,n,r=!1){const i=e._path;let o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(f,h)=>{const p=ft(f,i);o=o||Cr(h,p),s=s||Ir(h)});let l,a=t.syncPointTree_.get(i);a?(s=s||Ir(a),o=o||Cr(a,Y())):(a=new yA,t.syncPointTree_=t.syncPointTree_.set(i,a)),null!=o?l=!0:(l=!1,o=V.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((h,p)=>{const g=Cr(p,Y());g&&(o=o.updateImmediateChild(h,g))}));const u=CA(a,e);if(!u&&!e._queryParams.loadsAllData()){const f=oc(e);C(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const h=function L3(){return A3++}();t.queryToTagMap.set(f,h),t.tagToQueryMap.set(h,f)}let d=function w3(t,e,n,r,i,o){const s=vA(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function v3(t,e){t.eventRegistrations_.push(e)}(s,n),function E3(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(de,(o,s)=>{r.push(mo(o,s))}),n.isFullyInitialized()&&r.push(JS(n.getNode())),_A(t,r,n.getNode(),e)}(s,n)}(a,e,n,Qu(t.pendingWriteTree_,i),o,l);if(!u&&!s&&!r){const f=DA(a,e);d=d.concat(function V3(t,e,n){const r=e._path,i=aa(t,e),o=SA(t,n),s=t.listenProvider_.startListening(la(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)C(!Ir(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((u,c,d)=>{if(!G(u)&&c&&Ir(c))return[tc(c).query];{let f=[];return c&&(f=f.concat(EA(c).map(h=>h.query))),je(d,(h,p)=>{f=f.concat(p)}),f}});for(let u=0;u<l.length;++u){const c=l[u];t.listenProvider_.stopListening(la(c),aa(t,c))}}return s}(t,e,f))}return d}function ic(t,e,n){const i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{const u=Cr(a,ft(s,e));if(u)return u});return sA(i,e,o,n,!0)}function Eo(t,e){return bA(e,t.syncPointTree_,null,Qu(t.pendingWriteTree_,Y()))}function bA(t,e,n,r){if(G(t.path))return TA(t,e,n,r);{const i=e.get(Y());null==n&&null!=i&&(n=Cr(i,Y()));let o=[];const s=$(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){const u=n?n.getImmediateChild(s):null,c=lA(r,s);o=o.concat(bA(a,l,u,c))}return i&&(o=o.concat(Qm(i,t,r,n))),o}}function TA(t,e,n,r){const i=e.get(Y());null==n&&null!=i&&(n=Cr(i,Y()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=n?n.getImmediateChild(s):null,u=lA(r,s),c=t.operationForChild(s);c&&(o=o.concat(TA(c,a,l,u)))}),i&&(o=o.concat(Qm(i,t,r,n))),o}function SA(t,e){const n=e.query,r=aa(t,n);return{hashFn:()=>(function m3(t){return t.viewCache_.serverCache.getNode()}(e)||V.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function R3(t,e,n){const r=Zm(t,n);if(r){const i=e_(r),o=i.path,s=i.queryId,a=ft(o,e);return t_(t,o,new na(Um(s),a))}return[]}(t,n._path,r):function P3(t,e){return Eo(t,new na({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const o=function N$(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(i,n);return rc(t,n,null,o)}}}}function aa(t,e){const n=oc(e);return t.queryToTagMap.get(n)}function oc(t){return t._path.toString()+"$"+t._queryIdentifier}function Zm(t,e){return t.tagToQueryMap.get(e)}function e_(t){const e=t.indexOf("$");return C(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ee(t.substr(0,e))}}function t_(t,e,n){const r=t.syncPointTree_.get(e);return C(r,"Missing sync point for query tag that we're tracking"),Qm(r,n,Qu(t.pendingWriteTree_,e),null)}function la(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(function S3(){return C(nc,"Reference.ts has not been loaded"),nc}())(t._repo,t._path):t}class n_{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new n_(n)}node(){return this.node_}}class r_{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=_e(this.path_,e);return new r_(this.syncTree_,n)}node(){return ic(this.syncTree_,this.path_)}}const AA=function(t,e,n){return t&&"object"==typeof t?(C(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?U3(t[".sv"],e,n):"object"==typeof t[".sv"]?H3(t[".sv"],e):void C(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},U3=function(t,e,n){if("timestamp"===t)return n.timestamp;C(!1,"Unexpected server value: "+t)},H3=function(t,e,n){t.hasOwnProperty("increment")||C(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&C(!1,"Unexpected increment value: "+r);const i=e.node();if(C(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},i_=function(t,e,n){return o_(t,new n_(e),n)};function o_(t,e,n){const r=t.getPriority().val(),i=AA(r,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const s=t,a=AA(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new po(a,De(i)):t}{const s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new po(i))),s.forEachChild(de,(a,l)=>{const u=o_(l,e.getImmediateChild(a),n);u!==l&&(o=o.updateImmediateChild(a,u))}),o}}class s_{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function sc(t,e){let n=e instanceof ee?e:new ee(e),r=t,i=$(n);for(;null!==i;){const o=oo(r.node.children,i)||{children:{},childCount:0};r=new s_(i,r,o),n=oe(n),i=$(n)}return r}function gi(t){return t.node.value}function a_(t,e){t.node.value=e,l_(t)}function NA(t){return t.node.childCount>0}function ac(t,e){je(t.node.children,(n,r)=>{e(new s_(n,t,r))})}function PA(t,e,n,r){n&&!r&&e(t),ac(t,i=>{PA(i,e,!0,r)}),n&&r&&e(t)}function ua(t){return new ee(null===t.parent?t.name:ua(t.parent)+"/"+t.name)}function l_(t){null!==t.parent&&function G3(t,e,n){const r=function j3(t){return void 0===gi(t)&&!NA(t)}(n),i=$n(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,l_(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,l_(t))}(t.parent,t.name,t)}const W3=/[\[\].#$\/\u0000-\u001F\u007F]/,z3=/[\[\].#$\u0000-\u001F\u007F]/,u_=10485760,lc=function(t){return"string"==typeof t&&0!==t.length&&!W3.test(t)},RA=function(t){return"string"==typeof t&&0!==t.length&&!z3.test(t)},da=function(t,e,n){const r=n instanceof ee?new uG(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+ci(r));if("function"==typeof e)throw new Error(t+"contains a function "+ci(r)+" with contents = "+e.toString());if(Fu(e))throw new Error(t+"contains "+e.toString()+" "+ci(r));if("string"==typeof e&&e.length>u_/3&&yu(e)>u_)throw new Error(t+"contains a string greater than "+u_+" utf8 bytes "+ci(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(je(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!lc(s)))throw new Error(t+" contains an invalid key ("+s+") "+ci(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function cG(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=yu(e),jS(t)})(r,s),da(t,a,r),function dG(t){const e=t.parts_.pop();t.byteLength_-=yu(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&o)throw new Error(t+' contains ".value" child '+ci(r)+" in addition to actual children.")}},d_=function(t,e,n,r){if(!(r&&void 0===n||RA(n)))throw new Error(so(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class Q3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uc(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==n&&!bm(o,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function kA(t,e,n){uc(t,n),FA(t,r=>bm(r,e))}function Nt(t,e,n){uc(t,n),FA(t,r=>jt(r,e)||jt(e,r))}function FA(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(J3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function J3(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();li&&He("event: "+n.toString()),fo(r)}}}class Z3{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Q3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zu(),this.transactionQueueTree_=new s_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VA(t){const n=t.infoData_.getNode(new ee(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function ha(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:VA(t)})}function BA(t,e,n,r,i){t.dataUpdateCount++;const o=new ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){const l=mu(n,u=>De(u));s=function x3(t,e,n,r){const i=Zm(t,r);if(i){const o=e_(i),s=o.path,a=o.queryId,l=ft(s,e),u=fe.fromObject(n);return t_(t,s,new yo(Um(a),l,u))}return[]}(t.serverSyncTree_,o,l,i)}else{const l=De(n);s=wA(t.serverSyncTree_,o,l,i)}else if(r){const l=mu(n,u=>De(u));s=function N3(t,e,n){const r=fe.fromObject(n);return Eo(t,new yo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,l)}else{const l=De(n);s=sa(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Co(t,o)),Nt(t.eventQueue_,a,s)}function UA(t,e){f_(t,"connected",e),!1===e&&function iW(t){Do(t,"onDisconnectEvents");const e=ha(t),n=zu();Lm(t.onDisconnect_,Y(),(i,o)=>{const s=function(t,e,n,r){return o_(e,new r_(n,t),r)}(i,o,t.serverSyncTree_,e);_o(n,i,s)});let r=[];Lm(n,Y(),(i,o)=>{r=r.concat(sa(t.serverSyncTree_,i,o));const s=m_(t,i);Co(t,s)}),t.onDisconnect_=zu(),Nt(t.eventQueue_,Y(),r)}(t)}function f_(t,e,n){const r=new ee("/.info/"+e),i=De(n);t.infoData_.updateSnapshot(r,i);const o=sa(t.infoSyncTree_,r,i);Nt(t.eventQueue_,r,o)}function cc(t){return t.nextWriteId_++}function h_(t,e,n,r,i){Do(t,"set",{path:e.toString(),value:n,priority:r});const o=ha(t),s=De(n,r),a=ic(t.serverSyncTree_,e),l=i_(s,a,o),u=cc(t),c=Jm(t.serverSyncTree_,e,l,u,!0);uc(t.eventQueue_,c),t.server_.put(e.toString(),s.val(!0),(f,h)=>{const p="ok"===f;p||nt("set at "+e+" failed: "+f);const g=wr(t.serverSyncTree_,u,!p);Nt(t.eventQueue_,e,g),function br(t,e,n,r){e&&fo(()=>{if("ok"===n)e(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}(0,i,f,h)});const d=m_(t,e);Co(t,d),Nt(t.eventQueue_,d,[])}function p_(t,e,n){let r;r=".info"===$(e._path)?rc(t.infoSyncTree_,e,n):rc(t.serverSyncTree_,e,n),kA(t.eventQueue_,e._path,r)}function Do(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),He(n,...e)}function g_(t,e,n){return ic(t.serverSyncTree_,e,n)||V.EMPTY_NODE}function dc(t,e=t.transactionQueueTree_){if(e||fc(t,e),gi(e)){const n=GA(t,e);C(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function dW(t,e,n){const r=n.map(u=>u.currentWriteId),i=g_(t,e,r);let o=i;const s=i.hash();for(let u=0;u<n.length;u++){const c=n[u];C(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;const d=ft(e,c.path);o=o.updateChild(d,c.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;t.server_.put(l.toString(),a,u=>{Do(t,"transaction put response",{path:l.toString(),status:u});let c=[];if("ok"===u){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,c=c.concat(wr(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();fc(t,sc(t.transactionQueueTree_,e)),dc(t,t.transactionQueueTree_),Nt(t.eventQueue_,e,c);for(let f=0;f<d.length;f++)fo(d[f])}else{if("datastale"===u)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{nt("transaction at "+l.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Co(t,e)}},s)}(t,ua(e),n)}else NA(e)&&ac(e,n=>{dc(t,n)})}function Co(t,e){const n=$A(t,e),r=ua(n);return function fW(t,e,n){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=ft(n,l.path);let d,c=!1;if(C(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,d=l.abortReason,i=i.concat(wr(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,d="maxretry",i=i.concat(wr(t.serverSyncTree_,l.currentWriteId,!0));else{const f=g_(t,l.path,s);l.currentInputSnapshot=f;const h=e[a].update(f.val());if(void 0!==h){da("transaction failed: Data returned ",h,l.path);let p=De(h);"object"==typeof h&&null!=h&&$n(h,".priority")||(p=p.updatePriority(f.getPriority()));const m=l.currentWriteId,v=ha(t),w=i_(p,f,v);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=w,l.currentWriteId=cc(t),s.splice(s.indexOf(m),1),i=i.concat(Jm(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),i=i.concat(wr(t.serverSyncTree_,m,!0))}else c=!0,d="nodata",i=i.concat(wr(t.serverSyncTree_,l.currentWriteId,!0))}Nt(t.eventQueue_,n,i),i=[],c&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}fc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)fo(r[a]);dc(t,t.transactionQueueTree_)}(t,GA(t,n),r),r}function $A(t,e){let n,r=t.transactionQueueTree_;for(n=$(e);null!==n&&void 0===gi(r);)r=sc(r,n),n=$(e=oe(e));return r}function GA(t,e){const n=[];return WA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function WA(t,e,n){const r=gi(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ac(e,i=>{WA(t,i,n)})}function fc(t,e){const n=gi(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,a_(e,n.length>0?n:void 0)}ac(e,r=>{fc(t,r)})}function m_(t,e){const n=ua($A(t,e)),r=sc(t.transactionQueueTree_,e);return function $3(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{__(t,i)}),__(t,r),PA(r,i=>{__(t,i)}),n}function __(t,e){const n=gi(e);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(C(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(C(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(wr(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?a_(e,void 0):n.length=o+1,Nt(t.eventQueue_,ua(e),i);for(let s=0;s<r.length;s++)fo(r[s])}}const y_=function(t,e){const n=gW(t),r=n.namespace;return"firebase.com"===n.domain&&Dn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Dn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ym(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new ee(n.pathString)}},gW=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");-1===c&&(c=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(c,d)),c<d&&(i=function hW(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(c,d)));const f=function pW(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nt(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(u+1),10)):u=e.length;const h=e.slice(0,u);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class qA{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ke(this.snapshot.exportVal())}}class KA{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class v_{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return C(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Pt{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return G(this._path)?null:wm(this._path)}get ref(){return new on(this._repo,this._path)}get _queryIdentifier(){const e=ZS(this._queryParams),n=mm(e);return"{}"===n?"default":n}get _queryObject(){return ZS(this._queryParams)}isEqual(e){if(!((e=_t(e))instanceof Pt))return!1;const n=this._repo===e._repo,r=bm(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function aG(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class on extends Pt{constructor(e,n){super(e,n,new xm,!1)}get parent(){const e=HS(this._path);return null===e?null:new on(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class mi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ee(e),r=wo(this.ref,e);return new mi(this._node.getChild(n),r,de)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new mi(i,wo(this.ref,r),de)))}hasChild(e){const n=new ee(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Io(t,e){return(t=_t(t))._checkNotDeleted("ref"),void 0!==e?wo(t._root,e):t._root}function wo(t,e){return null===$((t=_t(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),d_("child","path",n,!1)):d_("child","path",e,!1),new on(t._repo,_e(t._path,e));var n}function gc(t,e){(function(t,e){if(".info"===$(e))throw new Error(t+" failed = Can't modify data under /.info/")})("set",(t=_t(t))._path),function(t,e,n,r){r&&void 0===e||da(so(t,"value"),e,n)}("set",e,t._path,!1);const n=new Is;return h_(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function yW(t){t=_t(t);const e=new v_(()=>{}),n=new pa(e);return function nW(t,e,n){const r=function O3(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,c)=>{const d=ft(u,n);r=r||Cr(c,d)});let i=t.syncPointTree_.get(n);i?r=r||Cr(i,Y()):(i=new yA,t.syncPointTree_=t.syncPointTree_.set(n,i));const o=null!=r,s=o?new Er(r,!0,!1):null;return function _3(t){return Yu(t.viewCache_)}(vA(i,e,Qu(t.pendingWriteTree_,e._path),o?s.getNode():V.EMPTY_NODE,o))}(t.serverSyncTree_,e);return null!=r?Promise.resolve(r):t.server_.get(e).then(i=>{const o=De(i).withIndex(e._queryParams.getIndex());let s;if(Xm(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=sa(t.serverSyncTree_,e._path,o);else{const a=aa(t.serverSyncTree_,e);s=wA(t.serverSyncTree_,e._path,o,a)}return Nt(t.eventQueue_,e._path,s),rc(t.serverSyncTree_,e,n,null,!0),o},i=>(Do(t,"get for query "+ke(e)+" failed: "+i),Promise.reject(new Error(i))))}(t._repo,t,n).then(r=>new mi(r,new on(t._repo,t._path),t._queryParams.getIndex()))}class pa{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const r=n._queryParams.getIndex();return new qA("value",this,new mi(e.snapshotNode,new on(n._repo,n._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new KA(this,e,n):null}matches(e){return e instanceof pa&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class mc{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new KA(this,e,n):null}createEvent(e,n){C(null!=e.childName,"Child events should have a childName.");const r=wo(new on(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new qA(e.type,this,new mi(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof mc&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function E_(t,e,n,r){return function ga(t,e,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const l=n,u=(c,d)=>{p_(t._repo,t,a),l(c,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const s=new v_(n,o||void 0),a="value"===e?new pa(s):new mc(e,s);return function lW(t,e,n){let r;r=".info"===$(e._path)?Xm(t.infoSyncTree_,e,n):Xm(t.serverSyncTree_,e,n),kA(t.eventQueue_,e._path,r)}(t._repo,t,a),()=>p_(t._repo,t,a)}(t,"value",e,n,r)}(function D3(t){C(!ec,"__referenceConstructor has already been defined"),ec=t})(on),function T3(t){C(!nc,"__referenceConstructor has already been defined"),nc=t}(on);const D_={};function NW(t,e,n,r,i){let o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||Dn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),He("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l,u,s=y_(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(l=!0,o=`http://${u}?ns=${a.namespace}`,s=y_(o,i),a=s.repoInfo):l=!s.repoInfo.secure;const c=i&&l?new Ks(Ks.OWNER):new F$(t.name,t.options,e);(function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!lc(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),RA(t)}(n))throw new Error(so(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),G(s.path)||Dn("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function RW(t,e,n,r){let i=D_[e.name];i||(i={},D_[e.name]=i);let o=i[t.toURLString()];return o&&Dn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Z3(t,false,n,r),i[t.toURLString()]=o,o}(a,t,c,new k$(t.name,n));return new OW(d,t)}class OW{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function eW(t,e,n){if(t.stats_=Dm(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Wu(t.repoInfo_,(r,i,o,s)=>{BA(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>UA(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new di(t.repoInfo_,e,(r,i,o,s)=>{BA(t,r,i,o,s)},r=>{UA(t,r)},r=>{!function tW(t,e){je(e,(n,r)=>{f_(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function B$(t,e){const n=t.toString();return Em[n]||(Em[n]=e()),Em[n]}(t.repoInfo_,()=>new BG(t.stats_,t.server_)),t.infoData_=new OG,t.infoSyncTree_=new IA({startListening:(r,i,o,s)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=sa(t.infoSyncTree_,r._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),f_(t,"connected",!1),t.serverSyncTree_=new IA({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,l)=>{const u=s(a,l);Nt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new on(this._repo,Y())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function PW(t,e){const n=D_[e];(!n||n[t.key]!==t)&&Dn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function jA(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Dn("Cannot call "+e+" on a deleted database.")}}di.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},di.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function LW(t){(function C$(t){hm=t})(Ms),ao(new ei("database",(e,{instanceIdentifier:n})=>NW(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),hr(rS,"0.14.3",t),hr(rS,"0.14.3","esm2017")}(),hr("firebase","9.17.1","app");class _c{}class C_{}class Jn{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Jn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Jn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class zW{encodeKey(e){return ZA(e)}encodeValue(e){return ZA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const KW=/%(\d[a-f0-9])/gi,YW={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZA(t){return encodeURIComponent(t).replace(KW,(e,n)=>YW[n]??e)}function yc(t){return`${t}`}class Sr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new zW,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function qW(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map(yc):[yc(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Sr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(yc(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(yc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class QW{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function e0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function t0(t){return typeof Blob<"u"&&t instanceof Blob}function n0(t){return typeof FormData<"u"&&t instanceof FormData}class ma{constructor(e,n,r,i){let o;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function JW(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Jn),this.context||(this.context=new QW),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Sr,this.urlWithParams=n}serializeBody(){return null===this.body?null:e0(this.body)||t0(this.body)||n0(this.body)||function XW(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Sr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||n0(this.body)?null:t0(this.body)?this.body.type||null:e0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Sr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const c=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,f)=>d.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,f)=>d.set(f,e.setParams[f]),u)),new ma(n,r,o,{params:u,headers:l,context:c,reportProgress:a,responseType:i,withCredentials:s})}}var Pe=(()=>((Pe=Pe||{})[Pe.Sent=0]="Sent",Pe[Pe.UploadProgress=1]="UploadProgress",Pe[Pe.ResponseHeader=2]="ResponseHeader",Pe[Pe.DownloadProgress=3]="DownloadProgress",Pe[Pe.Response=4]="Response",Pe[Pe.User=5]="User",Pe))();class I_{constructor(e,n=200,r="OK"){this.headers=e.headers||new Jn,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class w_ extends I_{constructor(e={}){super(e),this.type=Pe.ResponseHeader}clone(e={}){return new w_({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vc extends I_{constructor(e={}){super(e),this.type=Pe.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class r0 extends I_{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function b_(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let o0=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ma)o=n;else{let l,u;l=i.headers instanceof Jn?i.headers:new Jn(i.headers),i.params&&(u=i.params instanceof Sr?i.params:new Sr({fromObject:i.params})),o=new ma(n,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const s=function $W(...t){return Mc(t,X_(t))}(o).pipe(function GW(t,e){return ge(e)?ba(t,e,1):ba(t,1)}(l=>this.handler.handle(l)));if(n instanceof ma||"events"===i.observe)return s;const a=s.pipe(function WW(t,e){return Nr((n,r)=>{let i=0;n.subscribe(Pr(r,o=>t.call(e,o,i++)&&r.next(o)))})}(l=>l instanceof vc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Rr(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Rr(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Rr(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Rr(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Sr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,b_(i,r))}post(n,r,i={}){return this.request("POST",n,b_(i,r))}put(n,r,i={}){return this.request("PUT",n,b_(i,r))}}return t.\u0275fac=function(n){return new(n||t)(B(_c))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();function s0(t,e){return e(t)}function ZW(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const t8=new M("HTTP_INTERCEPTORS"),_a=new M("HTTP_INTERCEPTOR_FNS");function n8(){let t=null;return(e,n)=>(null===t&&(t=(yi(t8,{optional:!0})??[]).reduceRight(ZW,s0)),t(e,n))}let a0=(()=>{class t extends _c{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=Array.from(new Set(this.injector.get(_a)));this.chain=r.reduceRight((i,o)=>function e8(t,e,n){return(r,i)=>n.runInContext(()=>e(r,o=>t(o,i)))}(i,o,this.injector),s0)}return this.chain(n,r=>this.backend.handle(r))}}return t.\u0275fac=function(n){return new(n||t)(B(C_),B($r))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const s8=/^\)\]\}',?\n/;let u0=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new We(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((h,p)=>i.setRequestHeader(h,p.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const h=n.detectContentTypeHeader();null!==h&&i.setRequestHeader("Content-Type",h)}if(n.responseType){const h=n.responseType.toLowerCase();i.responseType="json"!==h?h:"text"}const o=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const h=i.statusText||"OK",p=new Jn(i.getAllResponseHeaders()),g=function a8(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(i)||n.url;return s=new w_({headers:p,status:i.status,statusText:h,url:g}),s},l=()=>{let{headers:h,status:p,statusText:g,url:m}=a(),v=null;204!==p&&(v=typeof i.response>"u"?i.responseText:i.response),0===p&&(p=v?200:0);let w=p>=200&&p<300;if("json"===n.responseType&&"string"==typeof v){const y=v;v=v.replace(s8,"");try{v=""!==v?JSON.parse(v):null}catch(A){v=y,w&&(w=!1,v={error:A,text:v})}}w?(r.next(new vc({body:v,headers:h,status:p,statusText:g,url:m||void 0})),r.complete()):r.error(new r0({error:v,headers:h,status:p,statusText:g,url:m||void 0}))},u=h=>{const{url:p}=a(),g=new r0({error:h,status:i.status||0,statusText:i.statusText||"Unknown Error",url:p||void 0});r.error(g)};let c=!1;const d=h=>{c||(r.next(a()),c=!0);let p={type:Pe.DownloadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),"text"===n.responseType&&i.responseText&&(p.partialText=i.responseText),r.next(p)},f=h=>{let p={type:Pe.UploadProgress,loaded:h.loaded};h.lengthComputable&&(p.total=h.total),r.next(p)};return i.addEventListener("load",l),i.addEventListener("error",u),i.addEventListener("timeout",u),i.addEventListener("abort",u),n.reportProgress&&(i.addEventListener("progress",d),null!==o&&i.upload&&i.upload.addEventListener("progress",f)),i.send(o),r.next({type:Pe.Sent}),()=>{i.removeEventListener("error",u),i.removeEventListener("abort",u),i.removeEventListener("load",l),i.removeEventListener("timeout",u),n.reportProgress&&(i.removeEventListener("progress",d),null!==o&&i.upload&&i.upload.removeEventListener("progress",f)),i.readyState!==i.DONE&&i.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(B(rw))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();const T_=new M("XSRF_ENABLED"),c0="XSRF-TOKEN",d0=new M("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>c0}),f0="X-XSRF-TOKEN",h0=new M("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>f0});class p0{}let l8=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=GI(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(B(Vt),B(Kf),B(d0))},t.\u0275prov=K({token:t,factory:t.\u0275fac}),t})();function u8(t,e){const n=t.url.toLowerCase();if(!yi(T_)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=yi(p0).getToken(),i=yi(h0);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Se=(()=>((Se=Se||{})[Se.Interceptors=0]="Interceptors",Se[Se.LegacyInterceptors=1]="LegacyInterceptors",Se[Se.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Se[Se.NoXsrfProtection=3]="NoXsrfProtection",Se[Se.JsonpSupport=4]="JsonpSupport",Se[Se.RequestsMadeViaParent=5]="RequestsMadeViaParent",Se))();function bo(t,e){return{\u0275kind:t,\u0275providers:e}}function c8(...t){const e=[o0,u0,a0,{provide:_c,useExisting:a0},{provide:C_,useExisting:u0},{provide:_a,useValue:u8,multi:!0},{provide:T_,useValue:!0},{provide:p0,useClass:l8}];for(const n of t)e.push(...n.\u0275providers);return function BP(t){return{\u0275providers:t}}(e)}const g0=new M("LEGACY_INTERCEPTOR_FN");function f8({cookieName:t,headerName:e}){const n=[];return void 0!==t&&n.push({provide:d0,useValue:t}),void 0!==e&&n.push({provide:h0,useValue:e}),bo(Se.CustomXsrfConfiguration,n)}let h8=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=an({providers:[c8(bo(Se.LegacyInterceptors,[{provide:g0,useFactory:n8},{provide:_a,useExisting:g0,multi:!0}]),f8({cookieName:c0,headerName:f0}))]}),t})();class To{constructor(e){this.http=e,this.apiKey="AIzaSyB7NPvyrv0bPIhedYBveQQIUlXBTIo0L-g"}callYoutubeApi(e){return this.http.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=${e}&type=video&key=${this.apiKey}\n  `)}}To.\u0275fac=function(e){return new(e||To)(B(o0))},To.\u0275prov=K({token:To,factory:To.\u0275fac,providedIn:"root"});class ya{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}function p8(t,e){if(1&t&&(ve(0,"h1"),Xe(1),xf(2,"json"),be()),2&t){const n=Mt();gt(1),Qi("logged in user: ",Of(2,1,null==n.user?null:n.user.email),"")}}function g8(t,e){if(1&t){const n=ns();ve(0,"form",2),Ve("ngSubmit",function(){return nr(n),rr(Mt().createAccount())}),ve(1,"h3"),Xe(2,"Sign Up"),be(),ve(3,"label",3),Xe(4,"Email:"),be(),Lt(5,"input",4),ve(6,"label",5),Xe(7,"Password:"),be(),Lt(8,"input",6),ve(9,"button",7),Xe(10,"Sign Up"),be()()}if(2&t){const n=Mt();lt("formGroup",n.signUpForm),gt(9),lt("disabled",n.signUpForm.invalid)}}function m8(t,e){if(1&t){const n=ns();ve(0,"form",2),Ve("ngSubmit",function(){return nr(n),rr(Mt().onSignInSubmit())}),ve(1,"h3"),Xe(2,"Sign In"),be(),ve(3,"label",3),Xe(4,"Email:"),be(),Lt(5,"input",4),ve(6,"label",5),Xe(7,"Password:"),be(),Lt(8,"input",6),ve(9,"button",7),Xe(10,"Sign In"),be()()}if(2&t){const n=Mt();lt("formGroup",n.signInForm),gt(9),lt("disabled",n.signInForm.invalid)}}function _8(t,e){if(1&t){const n=ns();ve(0,"p")(1,"a",16),Ve("click",function(){const o=nr(n).$implicit;Mt();const s=mf(2);return Mt().search(o),rr(s.value=o)}),Xe(2),be(),ve(3,"button",10),Ve("click",function(){const o=nr(n).$implicit;return rr(Mt(2).onDeleteSelection(o))}),Xe(4,"delete"),be()()}if(2&t){const n=e.$implicit;gt(2),Qi(" ",n,"")}}function y8(t,e){if(1&t&&(ve(0,"div")(1,"h6")(2,"a",17),Xe(3),Lt(4,"br"),be()(),Lt(5,"iframe",18),xf(6,"safe"),be()),2&t){const n=e.$implicit;gt(2),lt("href","http://youtube.com/watch?v="+n.id.videoId,Vd),gt(1),Qi(" ",n.snippet.title,""),gt(2),lt("src",Of(6,3,"https://www.youtube.com/embed/"+n.id.videoId),Bd)}}function v8(t,e){if(1&t){const n=ns();ve(0,"section")(1,"input",8,9),Ve("keyup.enter",function(){nr(n);const i=mf(2);return rr(Mt().search(i.value))}),be(),Lt(3,"br"),ve(4,"button",10),Ve("click",function(){return nr(n),rr(Mt().onSignOutClick())}),Xe(5,"SIGN OUT"),be(),Lt(6,"br"),ve(7,"form",2),Ve("ngSubmit",function(){return nr(n),rr(Mt().onSelectionSubmit())}),Lt(8,"input",11),ve(9,"label",12),Xe(10,"Selections:"),be(),ve(11,"button",13),Xe(12,"Submit"),be()(),qr(13,_8,5,1,"p",14),Lt(14,"br"),ve(15,"section",15),qr(16,y8,7,5,"div",14),be()()}if(2&t){const n=Mt();gt(7),lt("formGroup",n.selectionForm),gt(6),lt("ngForOf",n.selections),gt(3),lt("ngForOf",n.vidList)}}ya.\u0275fac=function(e){return new(e||ya)(D(bw,16))},ya.\u0275pipe=rt({name:"safe",type:ya,pure:!0});class va{constructor(e,n){this.vidRequestService=e,this.fb=n,this.firebaseConfig={apiKey:"AIzaSyB7NPvyrv0bPIhedYBveQQIUlXBTIo0L-g",authDomain:"sports-highlights-search.firebaseapp.com",databaseURL:"https://sports-highlights-search-default-rtdb.firebaseio.com",projectId:"sports-highlights-search",storageBucket:"sports-highlights-search.appspot.com",messagingSenderId:"892890974934",appId:"1:892890974934:web:04e2338650c8dfc0bf1777"},this.signInForm=new cr({email:new tn(""),password:new tn("")}),this.signUpForm=new cr({email:new tn(""),password:new tn("")}),this.selectionForm=new cr({name:new tn(""),selections:new tn([])});const r=Kb(this.firebaseConfig);this.auth=D$(r),this.database=function kW(t=Yb(),e){const n=Du(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=(t=>{const e=Lb("database");if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})();r&&function FW(t,e,n,r={}){(t=_t(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Dn("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Ks(Ks.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:function hU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify({alg:"none",type:"JWT"})),fu(JSON.stringify(s)),""].join(".")}(r.mockUserToken,t.app.options.projectId);o=new Ks(s)}!function MW(t,e,n,r){t.repoInfo_=new ym(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}(i,e,n,o)}(n,...r)}return n}(r),E_(Io(this.database,`users/${this.userId}`),o=>{const s=o.val()?.selections;this.selections=s||[],console.log("snapshot: ",s)})}createAccount(){const e=this.signUpForm.get("email")?.value,n=this.signUpForm.get("password")?.value;(function O2(t,e,n){return yg.apply(this,arguments)})(this.auth,e,n).then(r=>{}).catch(r=>{alert(`error creating account. code: ${r.code}. Message: ${r.message}`)})}onSignInSubmit(){const e=this.signInForm.get("email")?.value,n=this.signInForm.get("password")?.value;(function k2(t,e,n){return function og(t,e){return sg.apply(this,arguments)}(_t(t),ST.credential(e,n))})(this.auth,e,n).then(r=>{}).catch(r=>{alert(`error signing in user; code: ${r.code}, Message: ${r.message}`)})}onSignOutClick(){(function W2(t){return _t(t).signOut()})(this.auth).then(()=>{location.reload()}).catch(e=>{alert("error on sign out")})}search(e){this.results$=this.vidRequestService.callYoutubeApi(e),this.results$.pipe(function jW(t){return t<=0?()=>Sc:Nr((e,n)=>{let r=0;e.subscribe(Pr(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}(1)).subscribe(n=>{this.vidList=n.items})}onSelectionSubmit(){this.selections.push(this.selectionForm.value.name),gc(Io(this.database,`users/${this.userId}`),{selections:this.selections})}onDeleteSelection(e){const r=Io(this.database,`users/${this.auth.currentUser.uid}/selections`);yW(r).then(i=>{const o=i.val(),s=o.findIndex(a=>a===e);if(s>=0){const a=[...o.slice(0,s),...o.slice(s+1)];gc(r,a)}})}ngOnInit(){this.auth.onAuthStateChanged(e=>{e?(this.userId=e.uid,this.user=e,this.userRef=Io(this.database,`users/${this.userId}`),E_(Io(this.database,`users/${this.userId}/selections`),r=>{const i=r.val();this.selections=i?Object.values(i):[]})):this.selections=[]})}}va.\u0275fac=function(e){return new(e||va)(D(To),D(nU))},va.\u0275cmp=Hc({type:va,selectors:[["app-root"]],decls:4,vars:4,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["for","email"],["type","email","id","email","name","email","formControlName","email","required",""],["for","password"],["type","password","id","password","name","password","formControlName","password","required",""],["type","submit",3,"disabled"],["autofocus","","type","text","placeholder","enter search term and click enter",3,"keyup.enter"],["searchTerm",""],[3,"click"],["type","text","id","name","formControlName","name","placeholder","enter preset selection"],["for","selections"],["type","submit"],[4,"ngFor","ngForOf"],[1,"vidlist"],["href","#",3,"click"],["target","_blank",3,"href"],["width","420","height","345",3,"src"]],template:function(e,n){1&e&&(qr(0,p8,3,3,"h1",0),qr(1,g8,11,2,"form",1),qr(2,m8,11,2,"form",1),qr(3,v8,17,3,"section",0)),2&e&&(lt("ngIf",n.userId),gt(1),lt("ngIf",!n.userId),gt(1),lt("ngIf",!n.userId),gt(1),lt("ngIf",n.userId))},dependencies:[KI,QI,hb,Xl,Xw,Zw,du,cu,Jh,ZI,ya],styles:[".vidlist[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}div[_ngcontent-%COMP%]{overflow:hidden}input[_ngcontent-%COMP%]{width:50%;margin:auto;display:block;text-align:center}h6[_ngcontent-%COMP%]{text-align:center}"]});class So{}So.\u0275fac=function(e){return new(e||So)},So.\u0275mod=An({type:So,bootstrap:[va]}),So.\u0275inj=an({imports:[VV,h8,rU]}),LV().bootstrapModule(So).catch(t=>console.error(t))}},ge=>{ge(ge.s=48)}]);